<!DOCTYPE html>
<html>
    <!-- title -->




<head>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" >
    <meta name="author" content="Mengzelev">
    <meta name="renderer" content="webkit">
    <meta name="copyright" content="Mengzelev">
    <meta name="keywords" content="Mengzelev's blog | Mengzelev">
    <meta name="description" content="nothing to write">
    <meta name="Cache-Control" content="no-cache">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <title>计算机网络-课程笔记 · Mengzelev&#39;s Blog</title>
    <style type="text/css">
    @font-face {
        font-family: 'Oswald-Regular';
        src: url("/font/Oswald-Regular.ttf");
    }

    body {
        margin: 0;
    }

    header,
    footer,
    .back-top,
    .sidebar,
    .container,
    .site-intro-meta,
    .toc-wrapper {
        display: none;
    }

    .site-intro {
        position: relative;
        z-index: 3;
        width: 100%;
        /* height: 50vh; */
        overflow: hidden;
    }

    .site-intro-placeholder {
        position: absolute;
        z-index: -2;
        top: 0;
        left: 0;
        width: calc(100% + 300px);
        height: 100%;
        background: repeating-linear-gradient(-45deg, #444 0, #444 80px, #333 80px, #333 160px);
        background-position: center center;
        transform: translate3d(-226px, 0, 0);
        animation: gradient-move 2.5s ease-out 0s 1;
    }

    @keyframes gradient-move {
        0% {
            transform: translate3d(-226px, 0, 0);
        }
        100% {
            transform: translate3d(0, 0, 0);
        }
    }

</style>

    <link rel="preload" href= /css/style.css?v=20180721 as="style" onload="this.onload=null;this.rel='stylesheet'" />
    <link rel="stylesheet" href= /css/mobile.css?v=20180721 media="(max-width: 980px)">
    
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'" />
    
    <!-- /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
/* This file is meant as a standalone workflow for
- testing support for link[rel=preload]
- enabling async CSS loading in browsers that do not support rel=preload
- applying rel preload css once loaded, whether supported or not.
*/ -->
<script>
(function( w ){
	"use strict";
	// rel=preload support test
	if( !w.loadCSS ){
		w.loadCSS = function(){};
	}
	// define on the loadCSS obj
	var rp = loadCSS.relpreload = {};
	// rel=preload feature support test
	// runs once and returns a function for compat purposes
	rp.support = (function(){
		var ret;
		try {
			ret = w.document.createElement( "link" ).relList.supports( "preload" );
		} catch (e) {
			ret = false;
		}
		return function(){
			return ret;
		};
	})();

	// if preload isn't supported, get an asynchronous load by using a non-matching media attribute
	// then change that media back to its intended value on load
	rp.bindMediaToggle = function( link ){
		// remember existing media attr for ultimate state, or default to 'all'
		var finalMedia = link.media || "all";

		function enableStylesheet(){
			link.media = finalMedia;
		}

		// bind load handlers to enable media
		if( link.addEventListener ){
			link.addEventListener( "load", enableStylesheet );
		} else if( link.attachEvent ){
			link.attachEvent( "onload", enableStylesheet );
		}

		// Set rel and non-applicable media type to start an async request
		// note: timeout allows this to happen async to let rendering continue in IE
		setTimeout(function(){
			link.rel = "stylesheet";
			link.media = "only x";
		});
		// also enable media after 3 seconds,
		// which will catch very old browsers (android 2.x, old firefox) that don't support onload on link
		setTimeout( enableStylesheet, 3000 );
	};

	// loop through link elements in DOM
	rp.poly = function(){
		// double check this to prevent external calls from running
		if( rp.support() ){
			return;
		}
		var links = w.document.getElementsByTagName( "link" );
		for( var i = 0; i < links.length; i++ ){
			var link = links[ i ];
			// qualify links to those with rel=preload and as=style attrs
			if( link.rel === "preload" && link.getAttribute( "as" ) === "style" && !link.getAttribute( "data-loadcss" ) ){
				// prevent rerunning on link
				link.setAttribute( "data-loadcss", true );
				// bind listeners to toggle media back
				rp.bindMediaToggle( link );
			}
		}
	};

	// if unsupported, run the polyfill
	if( !rp.support() ){
		// run once at least
		rp.poly();

		// rerun poly on an interval until onload
		var run = w.setInterval( rp.poly, 500 );
		if( w.addEventListener ){
			w.addEventListener( "load", function(){
				rp.poly();
				w.clearInterval( run );
			} );
		} else if( w.attachEvent ){
			w.attachEvent( "onload", function(){
				rp.poly();
				w.clearInterval( run );
			} );
		}
	}


	// commonjs
	if( typeof exports !== "undefined" ){
		exports.loadCSS = loadCSS;
	}
	else {
		w.loadCSS = loadCSS;
	}
}( typeof global !== "undefined" ? global : this ) );
</script>

    <link rel="icon" href= "/assets/moe.ico" />
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.min.js" as="script" />
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js" as="script" />
    <link rel="preload" href="/scripts/main.js" as="script" />
    <link rel="preload" as="font" href="/font/Oswald-Regular.ttf" crossorigin>
    <link rel="preload" as="font" href="https://at.alicdn.com/t/font_327081_1dta1rlogw17zaor.woff" crossorigin>
    
    <!-- fancybox -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" defer></script>
    <!-- 百度统计  -->
    
    <!-- 谷歌统计  -->
    
    <script>
        (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
        })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
        ga('create', 'UA-185920418-1', 'auto');
        ga('send', 'pageview');
    </script>
    
<meta name="generator" content="Hexo 5.3.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

    
        <body class="post-body">
    
    
<!-- hexo-inject:begin --><!-- hexo-inject:end --><header class="header">

    <div class="read-progress"></div>
    <div class="header-sidebar-menu">&#xe775;</div>
    <!-- post页的toggle banner  -->
    
    <div class="banner">
            <div class="blog-title">
                <a href="/" >Mengzelev&#39;s Blog</a>
            </div>
            <div class="post-title">
                <a href="#" class="post-name">计算机网络-课程笔记</a>
            </div>
    </div>
    
    <a class="home-link" href=/>Mengzelev's Blog</a>
</header>
    <div class="wrapper">
        <div class="site-intro" style=








height:50vh;

>
    
    <!-- 主页  -->
    
    
    <!-- 404页  -->
            
    <div class="site-intro-placeholder"></div>
    <div class="site-intro-img" style="background-image: url(/intro/hinata.jpg)"></div>
    <div class="site-intro-meta">
        <!-- 标题  -->
        <h1 class="intro-title">
            <!-- 主页  -->
            
            计算机网络-课程笔记
            <!-- 404 -->
            
        </h1>
        <!-- 副标题 -->
        <p class="intro-subtitle">
            <!-- 主页副标题  -->
            
            
            <!-- 404 -->
            
        </p>
        <!-- 文章页meta -->
        
            <div class="post-intros">
                <!-- 文章页标签  -->
                
                
                    <div class="post-intro-read">
                        <span>Word count: <span class="post-count">19,579</span> / Reading time: <span class="post-count">69 min</span></span>
                    </div>
                
                <div class="post-intro-meta">
                    <span class="post-intro-calander iconfont-archer">&#xe676;</span>
                    <span class="post-intro-time">2019/10/12</span>
                    
                    <span id="busuanzi_container_page_pv" class="busuanzi-pv">
                        <span class="iconfont-archer">&#xe602;</span>
                        <span id="busuanzi_value_page_pv"></span>
                    </span>
                    
                    <span class="shareWrapper">
                        <span class="iconfont-archer shareIcon">&#xe71d;</span>
                        <span class="shareText">Share</span>
                        <ul class="shareList">
                            <li class="iconfont-archer share-qr" data-type="qr">&#xe75b;
                                <div class="share-qrcode"></div>
                            </li>
                            <li class="iconfont-archer" data-type="weibo">&#xe619;</li>
                            <li class="iconfont-archer" data-type="qzone">&#xe62e;</li>
                            <li class="iconfont-archer" data-type="twitter">&#xe634;</li>
                            <li class="iconfont-archer" data-type="facebook">&#xe67a;</li>
                        </ul>
                    </span>
                </div>
            </div>
        
    </div>
</div>
        <script>
 
  // get user agent
  var browser = {
    versions: function () {
      var u = window.navigator.userAgent;
      return {
        userAgent: u,
        trident: u.indexOf('Trident') > -1, //IE内核
        presto: u.indexOf('Presto') > -1, //opera内核
        webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
        gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
        mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端
        ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
        android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
        iPhone: u.indexOf('iPhone') > -1 || u.indexOf('Mac') > -1, //是否为iPhone或者安卓QQ浏览器
        iPad: u.indexOf('iPad') > -1, //是否为iPad
        webApp: u.indexOf('Safari') == -1, //是否为web应用程序，没有头部与底部
        weixin: u.indexOf('MicroMessenger') == -1, //是否为微信浏览器
        uc: u.indexOf('UCBrowser') > -1 //是否为android下的UC浏览器
      };
    }()
  }
  console.log("userAgent:" + browser.versions.userAgent);

  // callback
  function fontLoaded() {
    console.log('font loaded');
    if (document.getElementsByClassName('site-intro-meta')) {
      document.getElementsByClassName('intro-title')[0].classList.add('intro-fade-in');
      document.getElementsByClassName('intro-subtitle')[0].classList.add('intro-fade-in');
      var postIntros = document.getElementsByClassName('post-intros')[0]
      if (postIntros) {
        postIntros.classList.add('post-fade-in');
      }
    }
  }

  // UC不支持跨域，所以直接显示
  function asyncCb(){
    if (browser.versions.uc) {
      console.log("UCBrowser");
      fontLoaded();
    } else {
      WebFont.load({
        custom: {
          families: ['Oswald-Regular']
        },
        loading: function () {  //所有字体开始加载
          // console.log('loading');
        },
        active: function () {  //所有字体已渲染
          fontLoaded();
        },
        inactive: function () { //字体预加载失败，无效字体或浏览器不支持加载
          console.log('inactive: timeout');
          fontLoaded();
        },
        timeout: 5000 // Set the timeout to two seconds
      });
    }
  }

  function asyncErr(){
    console.warn('script load from CDN failed, will load local script')
  }

  // load webfont-loader async, and add callback function
  function async(u, cb, err) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (cb) { o.addEventListener('load', function (e) { cb(null, e); }, false); }
    if (err) { o.addEventListener('error', function (e) { err(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }

  var asyncLoadWithFallBack = function(arr, success, reject) {
      var currReject = function(){
        reject()
        arr.shift()
        if(arr.length)
          async(arr[0], success, currReject)
        }

      async(arr[0], success, currReject)
  }

  asyncLoadWithFallBack([
    "https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.min.js", 
    "https://cdn.bootcss.com/webfont/1.6.28/webfontloader.js",
    "/lib/webfontloader.min.js"
  ], asyncCb, asyncErr)
</script>        
        <img class="loading" src="/assets/loading.svg" style="display: block; margin: 6rem auto 0 auto; width: 6rem; height: 6rem;" />
        <div class="container container-unloaded">
            <main class="main post-page">
    <article class="article-entry">
        <p><u>【工事中】</u></p>
<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><ul>
<li>ISP：因特网服务提供商</li>
<li>协议：定义了两个或多个通信实体之间交换的报文的格式和顺序，以及报文发送和/或接受一条报文或其他事件所采取的动作</li>
<li>主机=端系统</li>
<li>以太网：以太网交换机-机构路由器-ISP</li>
<li>WiFi:接入点-企业网-有限因特网</li>
</ul>
<h2 id="分组交换"><a href="#分组交换" class="headerlink" title="分组交换"></a>分组交换</h2><ul>
<li>分组交换机：路由器/链路交换机</li>
<li>存储转发传输：交换机能够开始向输出链路传输该分组的第一个比特钱，必须接收到整个分组<ul>
<li>时延：$2L/R$，不存储是$L/R$</li>
<li>通过$N$条速率均为$R$的链路组成的路径，端到端时延$d_{\text{端到端}}=N\frac{L}{R}$</li>
</ul>
</li>
<li>输出缓存/输出队列：链路上进入交换机前分组等待的地方</li>
<li>排队时延，丢包</li>
<li>转发表：将目的地址（或一部分）映射为输出链路</li>
<li>路由选择协议：自动设置转发表</li>
</ul>
<h2 id="电路交换"><a href="#电路交换" class="headerlink" title="电路交换"></a>电路交换</h2><ul>
<li>预留资源，按需使用</li>
<li>频分复用FDM，时分复用TDM</li>
<li>带宽：频分复用的宽度</li>
</ul>
<h2 id="时延"><a href="#时延" class="headerlink" title="时延"></a>时延</h2><ul>
<li>处理时延$d_{proc}$：检查分组首部决定讲该分组导向何处所需要的时间<ul>
<li>也包括检查比特级别的差错需要的时间</li>
<li>微秒或更低数量级</li>
</ul>
</li>
<li>排队时延$d_{queue}$：在队列中，分组在链路上等待传输的时间<ul>
<li>取决于先期到达的正在排队等待向链路传输的分组数量</li>
<li>到达分组期望发现的分组数量是到达该队列的流量的强度和性质的函数</li>
<li>毫秒到微秒量级</li>
</ul>
</li>
<li>传输时延$d_{trans}$：将所有分组的比特推向链路所需要的时间<ul>
<li>毫秒到微秒量级</li>
</ul>
</li>
<li>传播时延$d_{prop}$：一个比特从该链路的起点到路由器B的传播所需要的时间<ul>
<li>不需要等推完了再上路，有一个比特传一个比特</li>
<li>两台路由器之间的距离/传播速率</li>
<li>毫秒量级</li>
</ul>
</li>
<li>节点总时延$d<em>{nodal}=d</em>{proc}+d<em>{queue}+d</em>{trans}+d_{prop}$</li>
<li>时延成分所起的作用可能会有很大不同</li>
</ul>
<h2 id="排队时延"><a href="#排队时延" class="headerlink" title="排队时延"></a>排队时延</h2><ul>
<li>$a$:分组的到达队列的平均速率(pkt/s)</li>
<li>流量强度=$La/R$<ul>
<li>$La/R&gt;1$：到达得比传输得快，队列无限增加，排队时延趋向无穷大</li>
</ul>
</li>
<li>流量强度越大，丢包的比例越大</li>
<li>假设没有排队时延的端到端时延：$d<em>{end-to-end}=N(d</em>{proc}+d<em>{trans}+d</em>{prop})$</li>
</ul>
<h2 id="吞吐量"><a href="#吞吐量" class="headerlink" title="吞吐量"></a>吞吐量</h2><ul>
<li>瓶颈链路</li>
<li><p>吞吐量取决于数据流过的链路的传输速率</p>
</li>
<li><p>吞吐量：每秒能够传送的数据量</p>
</li>
</ul>
<h2 id="协议分层"><a href="#协议分层" class="headerlink" title="协议分层"></a>协议分层</h2><p>服务模型：向上一层提供的服务<br>协议栈：各层的所有协议、</p>
<h3 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h3><ul>
<li>网络应用程序及它们的应用层协议存留的地方</li>
<li>一个端系统的应用程序与另一个端系统中的应用程序交换信息分组</li>
<li>HTTP,SMTP,FTP,DNS</li>
<li>报文(message)</li>
</ul>
<h3 id="运输层"><a href="#运输层" class="headerlink" title="运输层"></a>运输层</h3><ul>
<li>在应用程序端点之间传送应用层报文</li>
<li>TCP, UDP</li>
<li>报文段(segment)</li>
</ul>
<h3 id="网络层"><a href="#网络层" class="headerlink" title="网络层"></a>网络层</h3><ul>
<li>将数据报从一台主机移动到另一台主机</li>
<li>数据报(datagram)</li>
<li>网际协议IP</li>
</ul>
<h3 id="链路层"><a href="#链路层" class="headerlink" title="链路层"></a>链路层</h3><ul>
<li>将分组从一个节点(主机或路由器)移动到路径上的下一个节点</li>
<li>以太网、WiFi、电缆接入网DOCSIS、PPP</li>
<li>帧(frame)</li>
</ul>
<h3 id="物理层"><a href="#物理层" class="headerlink" title="　物理层"></a>　物理层</h3><ul>
<li>将帧中的一个个比特从一个节点移动到下一个节点</li>
<li>协议是链路相关的，并进一步与实际传输媒体相关</li>
</ul>
<h3 id="OSI模型"><a href="#OSI模型" class="headerlink" title="OSI模型"></a>OSI模型</h3><p>运输层和应用层之间多了表示层和会话层</p>
<ul>
<li>表示层：使通信的应用程序能够解释交换数据的含义<ul>
<li>数据压缩、数据加密、数据描述</li>
</ul>
</li>
<li>会话层：数据交换的定界和同步功能<ul>
<li>建立检查点和恢复方案</li>
</ul>
</li>
</ul>
<h3 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h3><ul>
<li>链路交换机只实现链路层和物理层</li>
<li>路由器只实现网络层、链路层和物理层</li>
<li>路由器能实现IP协议，链路交换机不行</li>
<li>分组=首部字段+有效载荷字</li>
</ul>
<h2 id="网络攻击"><a href="#网络攻击" class="headerlink" title="网络攻击"></a>网络攻击</h2><ul>
<li>恶意软件：进入设备干坏事</li>
<li>僵尸网络：受害设备网络</li>
<li>病毒：需要某种形式的用户交互来感染用户设备的恶意软件</li>
<li>蠕虫：无须任何明显用户交互就能进入设备的恶意软件</li>
<li>DoS：拒绝服务攻击<ul>
<li>弱点攻击、带宽洪泛、连接洪泛</li>
<li>分布式Dos:DDoS</li>
</ul>
</li>
<li>嗅探分组：分组嗅探器（被动接收机</li>
<li>IP哄骗：将具有虚假源地址的分组注入因特网</li>
</ul>
<h1 id="Ch6-链路层和局域网"><a href="#Ch6-链路层和局域网" class="headerlink" title="Ch6 链路层和局域网"></a>Ch6 链路层和局域网</h1><p>节点：运行链路层协议的任何设备<br>链路：沿着相邻结点的通信信道</p>
<h2 id="服务"><a href="#服务" class="headerlink" title="服务"></a>服务</h2><ul>
<li>成帧：把网络层数据报封装成链路层帧</li>
<li>链路接入：媒体访问控制(MAC)协议</li>
<li>可靠交付：确认和重传</li>
<li>差错检测和纠正</li>
</ul>
<p>实现：网络适配器（网络接口卡），硬件实现</p>
<h2 id="差错检测和纠正技术"><a href="#差错检测和纠正技术" class="headerlink" title="差错检测和纠正技术"></a>差错检测和纠正技术</h2><p>EDC：差错检测和纠正比特</p>
<h3 id="奇偶校验"><a href="#奇偶校验" class="headerlink" title="　奇偶校验"></a>　奇偶校验</h3><ul>
<li>二位奇偶校验：可以纠正单比特错，可检测但不能纠正两个比特错</li>
<li>前向纠错FEC:接收方检测和纠正差错的能力</li>
</ul>
<h3 id="Internet-checksum"><a href="#Internet-checksum" class="headerlink" title="Internet checksum"></a>Internet checksum</h3><ul>
<li>将数据的字节作为16比特的整数对待并求和:进位加法，最高位进位需要加到末尾</li>
<li>相对弱的差错保护</li>
</ul>
<h3 id="循环冗余检测CRC"><a href="#循环冗余检测CRC" class="headerlink" title="循环冗余检测CRC"></a>循环冗余检测CRC</h3><ul>
<li>又称多项式编码：将发送的比特串看成多项式系数</li>
</ul>
<p>$D\cdot 2^r \text{ XOR } R = nG$<br>$D\cdot 2^r=nG \text{ XOR }  R$<br>$R=\text{remainder}\frac{D\cdot 2^r}{G}$</p>
<p>转自阿姨博客的表示方法：</p>
<script type="math/tex; mode=display">\frac{X^{n-k}D(X)}{P(X)}=Q(X)+\frac{R(X)}{P(X)}</script><script type="math/tex; mode=display">T(X)=X^{n-k}D(X)+R(X)</script><p>其中，$X$是二进制串对应的多项式，如$P=11001, P(X)=X^4+X^3+1$<br>接收方用$T/P$，如果不能整除，说明存在差错。</p>
<ul>
<li>$P\to G$</li>
<li><p>位数：$P/G: n-k+1, D:k, T:n-k$</p>
</li>
<li><p>可以检测小于$r+1$比特的错($r=|R|$)</p>
</li>
</ul>
<h2 id="多路访问链路和协议"><a href="#多路访问链路和协议" class="headerlink" title="多路访问链路和协议"></a>多路访问链路和协议</h2><ul>
<li>点对点链路</li>
<li>广播链路</li>
<li>碰撞：多个节点同时传输帧导致所有节点同时接到多个帧</li>
<li>多路访问协议的特性(p294)<ul>
<li>当仅有一个节点发送数据时，该节点具有$R$ bps的吞吐量</li>
<li>当有$M$个节点发送数据时，每个节点的吞吐量为$R/M$ bps</li>
<li>协议是分散的：不会因为某主节点故障而使整个系统崩溃</li>
<li>协议是简单的，使实现不昂贵</li>
</ul>
</li>
</ul>
<h3 id="信道划分协议"><a href="#信道划分协议" class="headerlink" title="信道划分协议"></a>信道划分协议</h3><ul>
<li>TDM：将时间划分为时间帧，并进一步划分每个时间帧喂$N$个时隙(slot)</li>
<li>FDM：将$R$ bps信号划分为不同的频段，并把每个频率分给$N$个节点中的一个</li>
<li>CDMA(码分多址)：对每个节点分配一种不同的编码，不同的节点能够同时传输，并且各自接收方能正确接收</li>
</ul>
<h3 id="随机接入协议"><a href="#随机接入协议" class="headerlink" title="随机接入协议"></a>随机接入协议</h3><ul>
<li>传输节点总是以信道的全部速率进行发送</li>
<li>当有碰撞时，涉及碰撞的每个节点反复地重发它的帧</li>
<li>重发之前等待一个随机时延</li>
</ul>
<h4 id="时隙ALOHA"><a href="#时隙ALOHA" class="headerlink" title="时隙ALOHA"></a>时隙ALOHA</h4><ul>
<li>所有节点要同步传输</li>
<li>如果有碰撞，该节点以概率$p$在后续的每个时隙中重传它的帧，直到无碰撞地传出去</li>
<li>时隙多路访问协议的效率：当有大量的活跃节点且每个节点总有大量的帧要发送时，长期运行中成功时隙的份额</li>
<li>效率：$Np(1-p)^{N-1}$, 最大$1/e$</li>
</ul>
<h4 id="ALOHA"><a href="#ALOHA" class="headerlink" title="ALOHA"></a>ALOHA</h4><ul>
<li>一个给定节点成功传输一次的概率是$p(1-p)^{2(N-1)}$<ul>
<li>在$[t_0-1,t_0]$和$[t_0, t_0+1]$时间段内都不可以有别的节点传输</li>
</ul>
</li>
<li>最大效率$1/2e$</li>
</ul>
<h4 id="CSMA-载波侦听多路访问"><a href="#CSMA-载波侦听多路访问" class="headerlink" title="CSMA(载波侦听多路访问)"></a>CSMA(载波侦听多路访问)</h4><ul>
<li>载波侦听：说话之前先听，如果其他人正在说话，等到他们说完为止</li>
<li>碰撞检测：如果与他人同时开始说话，停止说话</li>
<li>广播信道的端到端信道传播时延在决定性能方面起到关键作用<ul>
<li>越大，XSMA节点不能侦听到另一个节点已经开始传输的机会越大</li>
</ul>
</li>
</ul>
<h4 id="CSMA-CD-具有碰撞检测的载波侦听多路访问"><a href="#CSMA-CD-具有碰撞检测的载波侦听多路访问" class="headerlink" title="CSMA/CD(具有碰撞检测的载波侦听多路访问)"></a>CSMA/CD(具有碰撞检测的载波侦听多路访问)</h4><ul>
<li>如果适配器在传输时检测到来自其他适配器的信号能量，就中止传输，并随机等待一个随机时间量再次传输</li>
<li>期望：碰撞节点数较少时，时间间隔较短；反之亦然<ul>
<li>二进制指数后退算法：经历了一连串的$n$次碰撞后，节点随机地从${0,1,2,\cdots,2^n-1}$中选择一个$K$值，$n$最大为10</li>
</ul>
</li>
<li>不考虑近期过去时间内可能已经发生的任何碰撞</li>
<li>效率$= n\frac{1}{1+5d<em>{prop}/d</em>{trans}}$</li>
</ul>
<h3 id="轮流协议"><a href="#轮流协议" class="headerlink" title="轮流协议"></a>轮流协议</h3><h4 id="轮询协议"><a href="#轮询协议" class="headerlink" title="轮询协议"></a>轮询协议</h4><ul>
<li>主节点轮询告诉每个节点能够传输的帧的最多数量</li>
<li>缺点：引入了轮询时延、主节点坏了就全坏了</li>
</ul>
<h4 id="令牌传递协议"><a href="#令牌传递协议" class="headerlink" title="令牌传递协议"></a>令牌传递协议</h4><ul>
<li>一个称为令牌(token)的小的特殊帧在节点之间以某种固定的次序进行交换</li>
<li>一个节点收到令牌时，仅当它有一些帧要传输，它才持有这个令牌，否则立即向下一个节点转发该令牌</li>
<li>有帧要传输时，发送最大数目的帧数，然后把令牌转发给下一个节点</li>
<li>缺点：一个节点坏了就全坏了，一个节点忘了释放令牌</li>
</ul>
<h2 id="交换局域网"><a href="#交换局域网" class="headerlink" title="交换局域网"></a>交换局域网</h2><h3 id="MAC地址"><a href="#MAC地址" class="headerlink" title="MAC地址"></a>MAC地址</h3><ul>
<li>链路层地址</li>
<li>6个字节，$2^48$个可能，每个字节表示为一堆十六进制数</li>
<li>没有两块适配器具有相同的地址—IEEE管理</li>
</ul>
<h3 id="地址解析协议ARP"><a href="#地址解析协议ARP" class="headerlink" title="　地址解析协议ARP"></a>　地址解析协议ARP</h3><ul>
<li>ARP表：包含IP地址到MAC地址的映射关系</li>
<li>TTL寿命值：表示从表中删除每个映射的时间</li>
<li>ARP分组：包含发送和接受IP地址及MAC地址<ul>
<li>查询分组：询问子网上所有其他主机和路由器，以确定对应于要解析的IP地址的那个MAC地址</li>
<li>响应分组</li>
<li>查询分组和响应分组格式相同</li>
<li>查询 ARP在广播帧中发送，响应ARP在标准帧中发送</li>
</ul>
</li>
<li>ARP即插即用，不需要手动配置</li>
</ul>
<h4 id="过程"><a href="#过程" class="headerlink" title="过程"></a>过程</h4><ul>
<li>发送方向其适配器发送一个ARP查询分组</li>
<li>适配器在链路层帧中封装这个ARP分组，并讲该帧传输进子网中</li>
<li>（广播地址）每个适配器把在该帧中的ARP分组向上传递给ARP模块，每个ARP模块检查它的IP地址是否与ARP分组中的目的IP地址相匹配，与之相匹配的一个给查询主机发送回一个带有所希望映射的响应ARP分组</li>
<li>查询主机更新ARP表，并发送IP数据报</li>
</ul>
<h3 id="以太网"><a href="#以太网" class="headerlink" title="以太网"></a>以太网</h3><ul>
<li>集线器(hub)：物理层设备，作用于比特，放大收到的比特的能量强度并向其他所有借口传输出去</li>
<li>广播局域网：无论何时集线器从它的一个接口接收到一个比特，它向所有其他接口发送该比特的副本</li>
<li>碰撞：某集线器同时从两个不同的接口接收到帧，将出现一次碰撞，生成该帧的节点必须重新传输该帧</li>
<li>交换机(switch)代替hub</li>
</ul>
<h4 id="帧结构"><a href="#帧结构" class="headerlink" title="帧结构"></a>帧结构</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">前同步码|目的地址|源地址|类型|数据|CRC</span><br></pre></td></tr></table></figure>
<ul>
<li>数据字段：承载IP数据报，最小长度46字节，最大长度1500字节</li>
<li>目的地址：目的适配器的MAC地址。是自己的地址/广播地址就丢给网络层，否则直接丢弃</li>
<li>源地址：顾名思义</li>
<li>类型字段：允许以太网复用多种网络层协议</li>
<li>CRC</li>
<li>前同步码<ul>
<li>前7字节都是10101010，最后一个字节为10101011</li>
<li>发送方的额定速率会产生漂移，所以前7字节用来同步接收方的时钟</li>
<li>最后两个字节用于警告接收方重要的东西要 来 了</li>
</ul>
</li>
</ul>
<p>以太网技术向网络层提供的服务：</p>
<ul>
<li>无连接：没有事先握手</li>
<li>不可靠：接收方不发送确认帧和否定确认帧，只丢弃没通过校验的帧</li>
</ul>
<h3 id="链路层交换机"><a href="#链路层交换机" class="headerlink" title="链路层交换机"></a>链路层交换机</h3><p>交换机的任务：接收入链路层帧并将它们转发到出链路<br>交换机对于子网中的主机和路由器是透明的<br>交换机输出接口设有缓存</p>
<h4 id="交换机表"><a href="#交换机表" class="headerlink" title="交换机表"></a>交换机表</h4><p>转发和过滤借助于交换机表实现<br>过滤：决定一个帧应该转发到某个接口还是应当将其丢弃的交换机功能<br>转发：决定一个帧应该被导向哪个接口，并把该帧移动到哪些接口</p>
<p>一个表项包括：</p>
<ul>
<li>一个MAC地址</li>
<li>通向该MAC地址的交换机接口</li>
<li>表项放置在表中的时间</li>
</ul>
<p>工作过程</p>
<ul>
<li>对于没有目的地址的表项，交换机广播该帧</li>
<li>存在到达接口与目标地址相联系的表项，丢弃该帧（过滤）</li>
<li>存在非到达接口与目标地址相联系的表项，交换机将帧放到目标接口的输出缓存完成转发功能</li>
</ul>
<h4 id="自学习"><a href="#自学习" class="headerlink" title="自学习"></a>自学习</h4><ul>
<li>交换机表初始为空</li>
<li>对于每个接口接收到的每个入帧，该交换机在其表中存储</li>
<li>在一段时间(老化时间)后交换机没有接受到以该地址作为源地址的帧，就在表中删除这个帧</li>
</ul>
<h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><ul>
<li>即插即用</li>
<li>消除碰撞<ul>
<li>绝不会在网段上同时传输多于一个帧</li>
<li>最大聚合带宽：该交换机所有接口速率之和（交换机间的接口不算</li>
</ul>
</li>
<li>异质链路<ul>
<li>能够以不同速率运行并且能够在不同的介质上运行</li>
</ul>
</li>
<li>便于管理</li>
</ul>
<h4 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h4><ul>
<li>活跃拓扑限制为一棵生成树</li>
<li>对于广播风暴不提供保护措施</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">特性</th>
<th style="text-align:center">集线器</th>
<th style="text-align:center">路由器</th>
<th style="text-align:center">交换机</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">流量隔离</td>
<td style="text-align:center">×</td>
<td style="text-align:center">√</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">即插即用</td>
<td style="text-align:center">√</td>
<td style="text-align:center">×</td>
<td style="text-align:center">√</td>
</tr>
<tr>
<td style="text-align:center">优化路由</td>
<td style="text-align:center">×</td>
<td style="text-align:center">√</td>
<td style="text-align:center">×</td>
</tr>
</tbody>
</table>
</div>
<h3 id="虚拟局域网"><a href="#虚拟局域网" class="headerlink" title="虚拟局域网"></a>虚拟局域网</h3><h1 id="CH7-无线网络和移动网络"><a href="#CH7-无线网络和移动网络" class="headerlink" title="CH7 无线网络和移动网络"></a>CH7 无线网络和移动网络</h1><p>无线$\neq$移动</p>
<ul>
<li>无线主机：到处都是</li>
<li>无线链路：主机通过无线通信链路连接到一个基站或者另一台无线主机；<ul>
<li>覆盖区域和链路速率</li>
</ul>
</li>
<li>基站：负责向与之关联的无线主机发送数据和从主机那里接收数据，协调与之相关联的多个无线主机的传输；e.g.蜂窝网络中的蜂窝塔、无限LAN中的接入点AP</li>
<li>基础设施模式</li>
</ul>
<h2 id="无线链路和网络特征"><a href="#无线链路和网络特征" class="headerlink" title="无线链路和网络特征"></a>无线链路和网络特征</h2><p>有线和无线网络的主要区别在链路层，网络层及以上都是相同的</p>
<ul>
<li>递减的信号强度：距离$\uparrow$,信号强度$\downarrow$</li>
<li>来自其他源的干扰</li>
<li>多径传播：使得接收方收到的信号变得模糊</li>
</ul>
<p>信噪比(SNR)</p>
<ul>
<li>单位分贝(dB)</li>
<li>收到的信号的振幅与噪声的振幅的以10为敌的对数的比值</li>
<li>较大的SNR是接收方更容易从背景噪声中提取传输的信号</li>
<li>对于给定的调制方案，SNR越高，BER(比特差错)越低</li>
</ul>
<h2 id="CDMA"><a href="#CDMA" class="headerlink" title="CDMA"></a>CDMA</h2><ul>
<li>码分多址信道划分协议</li>
<li>要发送的每个比特都通过乘以一个信号(编码)的比特来进行编码，这个信号的变化速率(码片速率)比初始数据比特序列的变化速率快很多</li>
<li>CDMA工作假设：干扰的传输比特信号是加性的</li>
<li>划分编码空间</li>
</ul>
<h2 id="WiFi-802-11无线LAN"><a href="#WiFi-802-11无线LAN" class="headerlink" title="WiFi: 802.11无线LAN"></a>WiFi: 802.11无线LAN</h2><p>基本服务集(BSS): 802.11体系结构的基本构建模块，包含一个或多个无线站点和一个称为AP的中央基站<br>每个无线站点具有一个6字节的MAC地址</p>
<h3 id="信道与关联"><a href="#信道与关联" class="headerlink" title="信道与关联"></a>信道与关联</h3><p>网络管理员安装AP时</p>
<ul>
<li>为AP分配一个单字或双字的服务及标识符(SSID)</li>
<li>分配一个信道号</li>
</ul>
<p>WiFi丛林：任意一个物理位置，在这里无线站点能从两个或多个AP中收到很强的信号<br>关联：无线站点在自身和AO之间创建一个虚拟线路</p>
<ul>
<li>被动扫描<ul>
<li>每个AP周期性地发送信标帧</li>
<li>每个信标帧包括该AP的SSID和MAC地址</li>
<li>无线站点扫描11个信道，找出可能位于该区域的AP所发出的信标帧</li>
</ul>
</li>
<li>主动扫描<ul>
<li>无线主机向位于其范围内的所有AP广播探测帧</li>
<li>选定与之关联的AP后，无线主机向AP发送一个关联请求帧，并且该AP以一个关联响应帧进行响应</li>
<li>需要二次请求/响应握手</li>
<li>主机通常将通过关联的AP向该子网发送一个DHCP发现报文，以获取在该子网中的一个IP地址</li>
</ul>
</li>
</ul>
<p>用户名和口令</p>
<ul>
<li>AP与一个鉴别服务器进行通信</li>
<li>一个鉴别服务器可以服务于多个AP</li>
</ul>
<h1 id="CH4-网络层：数据平面"><a href="#CH4-网络层：数据平面" class="headerlink" title="CH4 网络层：数据平面"></a>CH4 网络层：数据平面</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>数据平面：从输入链路向输出链路转发数据报<br>控制平面：协调本地的每个路由器的转发动作，使得数据报沿着源和目的地主机之间的路由器路径最终进行端到端传送</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">转发</th>
<th style="text-align:center">路由选择</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">将分组从一个输入链路接口转移到适当的输出链路接口的路由器本地动作</td>
<td style="text-align:center">分组从源到目的地所采取的端到端路径的网络范围</td>
</tr>
<tr>
<td style="text-align:center">时间尺度短(ns)</td>
<td style="text-align:center">时间尺度长(s)</td>
</tr>
<tr>
<td style="text-align:center">通常硬件实现</td>
<td style="text-align:center">通常软件实现</td>
</tr>
</tbody>
</table>
</div>
<p>路由选择算法决定插入该路由器转发表的内容</p>
<p>软件定义网络(SDN): 路由选择设备仅执行转发，远程控制器计算并分发转发表(软件实现)</p>
<p>网络服务模型：尽力而为服务</p>
<h2 id="路由工作原理"><a href="#路由工作原理" class="headerlink" title="路由工作原理"></a>路由工作原理</h2><p>假设：转发决定仅基于分组的目的地址，而非基于通用的分组首部字段</p>
<p>路由器组成部分：输入端口，交换结构、输出端口、路由选择处理器</p>
<h3 id="输入端口处理"><a href="#输入端口处理" class="headerlink" title="输入端口处理"></a>输入端口处理</h3><p>数据报-&gt;线路端接-&gt;数据链路处理(协议、拆封)-&gt;查找、转发、排队-&gt;交换结构</p>
<p>使用<strong>转发表</strong>查找输出端口，转发表由路由选择处理器计算和更新，从路由选择处理器经过独立总线复制到线路卡。使用每个输入端口的影子副本，转发决策能在每个输入端口本地做出，无须基于每个分组调用集中式路由选择处理器，避免集中式处理的瓶颈。</p>
<p>转发表：前缀匹配，最长前缀匹配规则</p>
<p>在某些设计中，一个分组可能会在进入交换结构时被暂时阻塞</p>
<p>查找外必须采取许多其他动作</p>
<ul>
<li>必须出现物理层和链路层处理</li>
<li>必须检查分组的版本号、检验以及寿命字段，并且重写后两个字段</li>
<li>必须更新用于网络管理的计数器</li>
</ul>
<p><strong>“匹配加动作”</strong></p>
<h3 id="交换"><a href="#交换" class="headerlink" title="交换"></a>交换</h3><ul>
<li>经内存交换<ul>
<li>类似传统计算机</li>
<li>在CPU(路由选择处理器)的直接控制下完成</li>
<li>输入与输出端口的功能像传统I/O设备</li>
<li>分组到达输入端口-&gt;中断-&gt;分组被复制到处理器内存-&gt;CPU提取目的地址，在转发表中找到适当的输出端口-&gt;CPU将分组复制到输出端口的缓存中</li>
<li>若内存带宽为$B$个分组/秒，则总的转发吞吐量必然小于$B/2$</li>
<li>不能同时转发两个分组</li>
</ul>
</li>
<li>经总线交换<ul>
<li>输入端口经共享总线将分组直接传送到输出端口，不需要路由选择处理器的干预</li>
<li>输入端口为分组预先计划一个交换机内部标签(首部)，指示本地输出端口-&gt;分组能被所有输出端口收到，但只有标签匹配的端口才能保存分组-&gt;标签在输出端口被去除</li>
<li>一次只有一个分组能跨越总线，因此多个分组同时到达路由器时，除了一个分组外其他都必须等待</li>
</ul>
</li>
<li>经互联网络交换<ul>
<li>纵横式交换机：$2N$条总线，连接$N$个输入端口和$N$个输出端口</li>
<li>交缠点通过交换结构控制器实现开启闭合</li>
<li>分组到达输入端口-&gt;交叉点-&gt;输出端口</li>
<li>非阻塞：能够并行转发多个分组</li>
</ul>
</li>
<li>多级交换元素</li>
</ul>
<h3 id="输出端口处理"><a href="#输出端口处理" class="headerlink" title="输出端口处理"></a>输出端口处理</h3><p>交换结构-&gt;排队(缓存管理)-&gt;数据链路处理(协议，封装)-&gt;线路端接-&gt;</p>
<h3 id="排队"><a href="#排队" class="headerlink" title="　排队"></a>　排队</h3><p>丢包：排队导致路由器的缓存空间耗尽</p>
<ul>
<li>输入排队<ul>
<li>线路前部(HOL)阻塞：在一个输入队列中排队的分组必须等待通过交换结构发送(即使输出端口是空闲的)，因为它被位于线路前部的另一个分组所阻塞 — 对纵横式交换结构而言</li>
</ul>
</li>
<li>输出排队<ul>
<li>主动队列管理：在缓存填满之前丢弃一个分组（或在首部加上标记），可以向发送方提供一个拥塞信号</li>
<li>缓存数量$B$与平均往返时延$RTT$、链路容量$C$、TCP流$N$的关系：$B=RTT\cdot C$, ($N$较大时)$B=RTT\cdot C/\sqrt{N}$</li>
</ul>
</li>
</ul>
<h3 id="分组调度"><a href="#分组调度" class="headerlink" title="分组调度"></a>分组调度</h3><ul>
<li>FIFO</li>
<li>优先权排队<ul>
<li>有多个优先权类，分开排队</li>
<li>每次选择非空的最高优先权类队列中的分组进行传输</li>
<li>非抢占式优先权排队：一旦分组开始传输就不能打断</li>
</ul>
</li>
<li>循环排队<ul>
<li>没有服务优先权，循环调度器在类之间轮流提供服务</li>
<li>保持工作排队规则：在有分组排队等待传输时不允许链路保持空闲—当寻找给定类的分组但没有找到时立即检查下一个类</li>
</ul>
</li>
<li>加权公平排队(WFQ)<ul>
<li>循环方式</li>
<li>每个类在任何时间间隔都可能收到不同数量的服务，每个类$i$被分配一个权$w_i$</li>
<li>第$i$类 将确保接收到的服务部分等于$w_i/(\sum w_i)$</li>
<li>最坏情况下第$i$类也能分得上述那么多带宽</li>
</ul>
</li>
</ul>
<h2 id="IPv4"><a href="#IPv4" class="headerlink" title="IPv4"></a>IPv4</h2><h3 id="数据报格式"><a href="#数据报格式" class="headerlink" title="数据报格式"></a>数据报格式</h3><p><img src="/2019/10/12/network-notes/ipv4.png" alt=""></p>
<ul>
<li>版本号：4比特，规定了数据报的IP协议版本，不同IP版本使用不同的数据报格式。</li>
<li>首部长度：4比特，IPv4数据报包含可变数量的选项，所以需要确定首部长度。大多数IP数据报不包含选项，所以一般具有20字节的首部。</li>
<li>服务类型(TOS)：8比特，使不同类型的IP数据报能相互区别开来。</li>
<li>数据报长度：16比特，IP数据报首部+数据的总长度，单位字节。理论最大长度为65535字节，但实际上很少有超过1500的。这个长度使得IP数据报能容纳最大长度以太网帧的载荷字段。</li>
<li>标识、标志、片偏移：与IP分片有关。</li>
<li>寿命(TTL)：确保数据报不会永远（如由于长时间的路由选择环路）在网络中循环。每当一台路由器处理时该字段的值-1，为0时自动丢弃。</li>
<li>协议：仅当到达最终目的地时才会有用，指示了IP数据报需要交给哪个特定的运输层协议。协议号是将网络层与运输层绑定到一起的黏合剂。（端口号是将运输层和应用层绑定到一起的黏合剂）</li>
<li>首部检验和：首部中的每两个字节当成一个数，用反码算术求和。每台路由器上必须重新计算检验和并再次存放到远处，因为TTL字段以及可能的选项字段会改变。【为什么TCP/IP都执行差错检测？—因为TCP和IP可以分别运行在不同的协议栈上</li>
<li>源和目的地IP地址：源主机通过DNS查找来决定目的地址。</li>
<li>选项：允许IP首部被扩展，很少使用。</li>
<li>数据(有效载荷)：大多数时候承载运输层报文，也可承载其他类型的数据,e.g.ICMP报文</li>
</ul>
<p>20字节IP首部+20字节TCP首部=40字节数据报首部</p>
<h3 id="数据报分片"><a href="#数据报分片" class="headerlink" title="数据报分片"></a>数据报分片</h3><p>原因：发送方与目的地路径上的每段链路可能使用不同的链路层协议<br>最大传送单元(MTU)：一个链路层帧能承载的最大数据量<br>每个较小的数据报称为片(fragment)</p>
<ul>
<li>发送主机将发送的每个数据报的标识号+1</li>
<li>路由器对数据报分片时，每个片具有初始数据报的源地址、目的地址和标识号</li>
<li>目的地主机能够检查数据报的标识号以确定哪些数据报实际上是同一较大数据报的片</li>
<li>IP是不可靠服务—初始数据报的最后一篇标志比特为0，其他片为1</li>
<li>为了让目的主机确定是否丢了一个片且按正确顺序组装片，使用偏移字段制定该片应该放在初始IP数据报的哪个位置</li>
</ul>
<h3 id="编址"><a href="#编址" class="headerlink" title="编址"></a>编址</h3><p>一台主机通常只有一条链路连接到网络，主机与物理链路之间的边界叫作<strong>接口</strong>。<br>路由必须拥有多条链路与之相连接，路由器与它任意一条链路之间的边界也叫作<strong>接口</strong>。<br>一个IP地址与一个接口相关联。</p>
<p>IP地址长32比特，采用点分十进制记法书写<br>格式：$a.b.c.d/x$</p>
<ul>
<li>子网掩码：32位中前$x$比特全取1</li>
<li>最高$x$比特构成了网络部分，也称<strong>前缀</strong></li>
<li>组织内部的设备的IP共享相同的前缀</li>
<li>减少了子网外路由器中转发表的长度</li>
</ul>
<p>子网：分开主机和路由器的每个接口，产生几个隔离的网络孤岛，使用接口端接这些隔离的网络的端点。这些隔离的网络中的每一个都叫作一个子网。<br>在给定子网上的所有设备都具有相同的子网地址。<br>因特网地址的分配策略称为<strong>无类别域间路由选择</strong>(CIDR, Classless Interdomain Routing)<br>寻址：<strong>最长前缀匹配</strong>，选择与目的地址相匹配的最长地址前缀<br>IP广播地址：255.255.255.255，当报文的目的地址是广播地址时会被交付给同一个网络中的所有主机，路由器也会有选择地向临近的子网转发该报文</p>
<h3 id="获取一块地址"><a href="#获取一块地址" class="headerlink" title="获取一块地址"></a>获取一块地址</h3><p>ISP从自己的大地址块中提供一些地址给组织<br>IP地址由因特网名字和编号分配机构(ICANN)管理，ICANN还管理DNS根服务器</p>
<h3 id="获取主机地址：DHCP"><a href="#获取主机地址：DHCP" class="headerlink" title="获取主机地址：DHCP"></a>获取主机地址：DHCP</h3><ul>
<li>动态主机配置协议(DHCP)允许主机获取一个IP地址，还允许主机得知子网掩码、第一跳路由器地址(默认网关)、本地DNS服务器的地址</li>
<li>即插即用协议/零配置协议</li>
<li>客户-服务器协议<ul>
<li>每个子网将具有一台DHCP服务器</li>
<li>如果某子网中没有DHCP服务器，则需要一个DHCP中继代理（通常是一台路由器），这个代理用于知道该网络的DHCP服务器的地址</li>
</ul>
</li>
</ul>
<h4 id="DHCP协议4步"><a href="#DHCP协议4步" class="headerlink" title="DHCP协议4步"></a>DHCP协议4步</h4><ul>
<li>DHCP服务器发现<ul>
<li>使用<strong>DHCP发现报文</strong></li>
<li>源地址：0.0.0.0(“本主机”)，目的地址：255.255.255.255(广播地址)</li>
<li>用于一个新到达的主机发现一个要与其交互的DHCP服务器</li>
</ul>
</li>
<li>DHCP服务提供<ul>
<li>DHCP服务器收到DHCP发现报文后对客户做出响应</li>
<li>使用<strong>DHCP提供报文</strong>，包含发现报文的事物ID、向客户推荐的IP地址、网络掩码、IP地址租用期(即IP地址的有效时间量，通常为几小时或几天)</li>
<li>源地址：自己的IP地址，目的地址：255.255.255.255(广播地址)</li>
<li>子网中可能存在多个DHCP服务器，客户需要选择一个</li>
</ul>
</li>
<li>DHCP请求<ul>
<li>客户向选中的服务器提供<strong>DHCP请求报文</strong>进行响应，回显配置的参数</li>
<li>源地址：0.0.0.0.，目的地址:255.255.255.255</li>
</ul>
</li>
<li>DHCP ACK<ul>
<li>服务器用<strong>DHCP ACK报文</strong>对DHCP请求报文进行响应，证实所要求的参数</li>
<li>源地址：DHCP服务器自己的地址，目的地址:255.255.255.255</li>
<li>客户收到DHCP ACK后交互完成</li>
</ul>
</li>
</ul>
<p>不能维持与远程应用之间的TCP连接</p>
<h2 id="网络地址转换-NAT"><a href="#网络地址转换-NAT" class="headerlink" title="网络地址转换(NAT)"></a>网络地址转换(NAT)</h2><ul>
<li>NAT使能路由器<ul>
<li>4个接口具有相同的网络地址10.0.0/24</li>
<li>地址空间10.0.0.0/8是在RFC 198中保留的三部分IP地址空间之一，用于家庭网络等专用网络或具有专用地址的地域，仅在给定的网络中才有意义</li>
</ul>
</li>
<li>NAT使能路由器对外界的行为如同一个具有单一IP地址的单一设备<ul>
<li>所有流向外界/进入家庭的报文都拥有同一个源/目的IP地址</li>
<li>NAT使能路由器对外界隐藏了家庭网络的细节</li>
</ul>
</li>
<li>NAT转化表<ul>
<li>NAT收到家庭主机发送向外界的数据报后，为其生成一个新的源端口号，将源IP替代为其广域网一侧接口的IP地址，且将源端口号替换为新生成的端口号</li>
<li>端口号字段16字节，NAT协议可支持超过60000个并行使用路由器广域网一侧单个IP地址的连接</li>
<li>路由器中的NAT在其NAT转换表中增加一个表项，记录WAN端和LAN段IP地址及端口的对应关系</li>
</ul>
</li>
</ul>
<h2 id="IPv6"><a href="#IPv6" class="headerlink" title="IPv6"></a>IPv6</h2><h3 id="数据报格式-1"><a href="#数据报格式-1" class="headerlink" title="数据报格式"></a>数据报格式</h3><p><img src="/2019/10/12/network-notes/ipv6.png" alt=""></p>
<p>定长<strong>40字节(320比特)</strong>首部</p>
<ul>
<li>版本(4比特)：标识IP版本号，IPv6将其设置为6<ul>
<li>设置为4不能得到合法的IPv4数据报</li>
</ul>
</li>
<li>流量类型(8比特)：与IPv4的TOS类似，使不同类型的IP数据报能相互区别开来</li>
<li>流标签(20比特)：标识一条数据报的流<ul>
<li>对一条流中的某些数据报给出优先权</li>
<li>也能够用来对来自某些应用的数据报给出更高的优先权</li>
</ul>
</li>
<li><p>有效载荷长度(16比特无符号整数)：定长40字节数据报首部后的字节数量</p>
</li>
<li><p>下一个首部(8比特)：表示数据报中的内容要交付给哪个协议(e.g.TCP or UDP)，取值同IPv4</p>
</li>
<li>跳限制(8比特)：相当于IPv4的TTL，转发的每台路由器对该字段的值-1，到0自动丢弃</li>
<li>源地址和目的地址(各128比特)</li>
<li>数据</li>
</ul>
<h3 id="相对IPv4的变化"><a href="#相对IPv4的变化" class="headerlink" title="相对IPv4的变化"></a>相对IPv4的变化</h3><p>新增了：</p>
<ul>
<li>扩大的地址容量<ul>
<li>地址长度：32 bits -&gt; 128 bits</li>
<li>引入任播地址：可以使数据报交付给一组主机中的任意一个</li>
</ul>
</li>
<li>流定义</li>
</ul>
<p>删去了：</p>
<ul>
<li>分片/重新组装：因为太耗时了<ul>
<li>如果路由器收到的IPv6数据报太大不能转发到出链路上的话，路由器只需丢弃该数据报，并向发送方发回一个“分组太大”的ICMP差错报文</li>
<li>大大加快了IP转发速度</li>
</ul>
</li>
<li>首部检验和：因为太耗时了，而且多余</li>
<li>选项：不属于首部的一部分，但没有消失，可能出现在“下一个首部”指出的位置上<ul>
<li>使得IPv6的首部是定长的</li>
</ul>
</li>
</ul>
<h3 id="IPv4到IPv6的迁移"><a href="#IPv4到IPv6的迁移" class="headerlink" title="IPv4到IPv6的迁移"></a>IPv4到IPv6的迁移</h3><p><strong>建隧道</strong></p>
<p><img src="/2019/10/12/network-notes/tunnel.png" alt=""></p>
<p>隧道：两台IPv6路由器之间的中间IPv4路由器集合</p>
<ul>
<li>隧道发送端的IPv6节点(B)将整个IPv6数据报放到一个IPv4数据报中,将源地址设为自己，目的地址设为隧道接收端的IPv6节点(E)</li>
<li>中间的IPv4路由器照常转发IPv4数据报</li>
<li>隧道接收端通过观察IPv4数据报中<strong>协议号字段</strong>是41确定该数据报含有一个IPv6数据报，并将其取出</li>
</ul>
<h2 id="通用转发和SDN"><a href="#通用转发和SDN" class="headerlink" title="通用转发和SDN"></a>通用转发和SDN</h2><p>链路层和路由器的中间盒(e.g.防火墙、NAT、深度分组检测DPI等)过多，需要一个统一的设备来提供功能——分组交换机</p>
<p>匹配加动作表(在OpenFlow中称为流表)</p>
<ul>
<li>远程控制器计算、安装和更新</li>
<li>包括：首部字段值的集合、计数器集合(当分组与流表项匹配是更新计数值)、匹配时所采取的动作集合</li>
</ul>
<h3 id="匹配"><a href="#匹配" class="headerlink" title="匹配"></a>匹配</h3><p><img src="/2019/10/12/network-notes/openflow.png" alt=""></p>
<p>(据说不考，先不抄了)</p>
<h1 id="CH5-网络层：控制平面"><a href="#CH5-网络层：控制平面" class="headerlink" title="CH5 网络层：控制平面"></a>CH5 网络层：控制平面</h1><h2 id="路由选择算法"><a href="#路由选择算法" class="headerlink" title="路由选择算法"></a>路由选择算法</h2><p>目的：从发送方到接收方的过程中确定一条通过路由器网络的好的路径(等价于路由)</p>
<ul>
<li><ul>
<li>集中式路由选择算法：具有全局状态信息的算法，必须知道每条链路的开销，常被称为链路状态(LS)算法</li>
<li>分布式路由选择算法：以迭代、分布式的方式计算最小开销路径，每个节点只有与其相邻节点的信息</li>
</ul>
</li>
<li><ul>
<li>静态路由选择算法：路由随时间变化缓慢</li>
<li>动态路由选择算法：随着网络流量负载或拓扑发生变化而改变路由选择路径</li>
</ul>
</li>
<li><ul>
<li>负载敏感算法：链路开销会动态地变化反映出底层链路的当前拥塞水平</li>
<li>负载迟钝算法</li>
</ul>
</li>
</ul>
<h3 id="链路状态路由选择算法"><a href="#链路状态路由选择算法" class="headerlink" title="链路状态路由选择算法"></a>链路状态路由选择算法</h3><p>输入：让每个节点向网络中所有其他节点广播链路状态分组——链路状态广播算法<br><strong>Dijksra算法</strong><br><img src="/2019/10/12/network-notes/ls.png" alt=""><br>最差情况下复杂性为$O(n^2)$</p>
<p>问题：链路开销非对称，即链路开销对应于承载的流量<br>会出现振荡：所有的流量都被导向同一个方向<br>路由器的自同步：即使它们在初始时以同一周期但在不同时刻执行算法，算法执行时机最终会在路由器上变为同步并保持<br>解决方案：让每台路由器发送链路通告的时间随机化</p>
<h3 id="距离向量-DV-路由选择算法"><a href="#距离向量-DV-路由选择算法" class="headerlink" title="距离向量(DV)路由选择算法"></a>距离向量(DV)路由选择算法</h3><p>分布式的、迭代的（能自我终止）、异步的<br>距离向量：$\bf{D}_x$$=\left[D_x(x), D_x(y), D_x(z) \right]$<br><strong>Bellman-Ford算法</strong><br>Bellman-Ford方程：$d_x(y)=\min_v{c(x,v)+d_v(y)}$<br><img src="/2019/10/12/network-notes/dv.png" alt=""></p>
<p>每个节点等待来自任何邻居的更新，当接收到一个更新时计算它的新距离向量并向它的邻居分布其新距离向量</p>
<p>当一个节点检测到从它自己到邻居的链路开销发生变化时，它就更新其距离向量——可能会出现路由选择环路：y通过z到x，同时z通过y到x<br>因为开销改变的链路在其他节点的距离表中的信息仍没有被抹去</p>
<p>链路开销的增加会导致坏消息传播得很慢——无穷计数问题</p>
<p>毒性逆转：撒谎设置$D_z(x)=\infty$，这样y就永远不会试图经由z路由选择到x<br>Wiki: In computer networking, split-horizon route advertisement is a method of preventing routing loops in distance-vector routing protocols by prohibiting a router from advertising a route back onto the interface from which it was learned.(从哪里学习来的，就拒绝发回到哪里去)<br>依然无法解决无穷计数问题</p>
<h3 id="比较"><a href="#比较" class="headerlink" title="比较"></a>比较</h3><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">维度</th>
<th style="text-align:center">LS</th>
<th style="text-align:center">DV</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">报文复杂性</td>
<td style="text-align:center">发送$O(\</td>
<td style="text-align:center">NE\</td>
<td>)$个报文，每次改变向所有节点发送新开销</td>
<td>每次迭代邻居间交换报文</td>
</tr>
<tr>
<td style="text-align:center">收敛速度</td>
<td style="text-align:center">还行(?)，多项式时间</td>
<td style="text-align:center">收敛较慢，且会出现路由选择环路</td>
</tr>
<tr>
<td style="text-align:center">健壮性</td>
<td style="text-align:center">路由器某种程度上分离</td>
<td style="text-align:center">一个不正确节点的计算值会扩散到整个网络</td>
</tr>
</tbody>
</table>
</div>
<h2 id="因特网自治系统内部的路由选择：OSPF"><a href="#因特网自治系统内部的路由选择：OSPF" class="headerlink" title="因特网自治系统内部的路由选择：OSPF"></a>因特网自治系统内部的路由选择：OSPF</h2><p>规模(无穷计数)和管理自治(ISP按自己意愿运行路由器)问题——解决：自治系统(AS)<br>每个AS由一组通常处在相同管理控制下的路由器组成<br>一个自治系统由其全局唯一的AS号(ASN)所标识，ASN由ICANN区域注册机构发放</p>
<p>OSPF：开放最短路优先，Open Shortest Path First<br>开放：公众可用<br>LS协议，使用洪泛链路状态信息和Dijkstra最短路径算法<br>各条链路开销为网络管理员手动配置</p>
<ul>
<li>路由器向AS内所有其他路由器广播路由选择信息</li>
<li>每当一条链路状态发生变化时，路由器就会广播链路状态信息；即使未变化，也会至少每隔30min一次广播链路状态——增加鲁棒性</li>
<li>OSPF报文由IP承载，对上层协议的值为89，因此OSPF协议必须自己实现诸如可靠报文传输、链路状态广播等功能。</li>
<li>还要检查链路正在运行(通过向邻居发送HELLO报文)，并允许OSPF路由器获得相邻路由器的网络范围链路状态的数据库</li>
</ul>
<p>优点：</p>
<ul>
<li>安全：能鉴别和加密(简单的orMD5)</li>
<li>支持选择多条相同开销的路径</li>
<li>对单播与多播路由选择的综合支持</li>
<li>支持在单个AS中的层次结构<ul>
<li>区域边界路由器：为流向该区域以外的分组提供路由选择</li>
<li>主干区域：为该AS中其他区域之间的流量提供路由选择，所有区域边界路由器+一些非边界路由器</li>
</ul>
</li>
</ul>
<h2 id="AS间的路由选择协议：BGP"><a href="#AS间的路由选择协议：BGP" class="headerlink" title="AS间的路由选择协议：BGP"></a>AS间的路由选择协议：BGP</h2><p>BGP：边界网关协议, Broder Gateway Protocol<br>分布式、异步<br>分组不是路由到特定地址，而是路由到CIDR化的前缀，每个前缀表示一个子网或一个子网的集合</p>
<p>BGP为每台路由器提供了一种完成以下任务的手段：</p>
<ul>
<li>从邻居AS获得前缀的可达性信息</li>
<li>确定到该前缀的“最好的”路由</li>
</ul>
<h3 id="通告BGP路由信息"><a href="#通告BGP路由信息" class="headerlink" title="通告BGP路由信息"></a>通告BGP路由信息</h3><p>对于每个AS，每台路由器要么是一台网关路由器，要么是一台内部路由器。<br>网关路由器：位于AS边缘，直接连接到在其他AS中的路由器<br>内部路由器：仅连接在它自己AS中的主机和路由器</p>
<p>每对路由器通过使用179端口的半永久TCP连接交换路由选择信息。<br>每条直线连接以及所有通过该连接发送的BGP报文，称为<strong>BGP连接</strong><br>跨越两个AS的BGP连接称为<strong>外部BGP连接</strong>(eBGP)<br>在相同AS中的两台路由器之间的BGP称为<strong>内部BGP连接</strong>(iBGP)<br>直接连接在不同AS中的网关路由器的每条链路通常有一条eBGP连接，在每个AS中的路由器之间还有多条iBGP连接，iBGP连接不总是与物理链路对应</p>
<p>前缀中包含一些BGP属性<br>前缀+其属性称为路由</p>
<ul>
<li>AS-PATH属性：包含了通告已经通过的AS的列表<ul>
<li>当一个前缀通过某AS时，该AS将其ASN加入AS-PATH的现有列表</li>
<li>BGP路由器还使用AS-PATH属性来检测和防止通告环路，如果一台路由器在路径列表中看到了包含它自己的AS，则它将拒绝该通告</li>
</ul>
</li>
<li>NEXT-HOP属性：AS-PATH起始路由器接口的IP地址（到达前缀$x$路径上的第一台路由器的地址</li>
</ul>
<h3 id="热土豆路由选择"><a href="#热土豆路由选择" class="headerlink" title="热土豆路由选择"></a>热土豆路由选择</h3><p><s>实际上明明是烫手山芋</s></p>
<p>从所有可能的路由中选择到开始该路由的NEXT-HOP路由器具有最小开销的路由<br>路由器尽可能快地将分组送出其AS，而不担心AS外部到目的地的余下部分的开销<br>对于在相同AS中的两台路由器，可能对相同前缀选择两条不同的AS路径</p>
<h3 id="路由选择算法-1"><a href="#路由选择算法-1" class="headerlink" title="路由选择算法"></a>路由选择算法</h3><p>输入：到某前缀的所有路由的集合</p>
<p>当有多条路由时，顺序调用以下消除规则：</p>
<ul>
<li>路由被指派一个<strong>本地偏好</strong>值属性。该属性为策略决定，取决于网管，高的被优先选择（可能会有多条）。</li>
<li>从余下的路由中选择具有<strong>最短AS-PATH</strong>的路由。如果这是唯一路由选择规则，使用DV算法决定路径，其中距离测度为AS跳的跳数。</li>
<li>从余下的路由中使用热土豆路由选择，即最靠近NEXT-HOP路由器的路由</li>
<li>如果仍留下多条路由，使用BGP标识符来选择路由</li>
</ul>
<h3 id="IP任播"><a href="#IP任播" class="headerlink" title="IP任播"></a>IP任播</h3><p>通常用于DNS中<br>DNS服务器为多台服务器指派相同的IP地址，并且使用标准的BGP从这些服务器来通告该IP地址。<br>当某台BGP路由器收到对于该IP地址的多个路由通告，它将这些通告处理为对相同的物理位置提供不同的路径。<br>当配置其路由表时，每台路由器将本地化地使用BGP路由选择算法来挑选到该IP地址的“最好的”路由。<br>无论客户位于何处，当想向DNS服务器的某个IP地址发送一个请求时，因特网路由器则向那个“最近的”服务器转发该请求分组，最近的服务器是有BGP路由选择算法所定义的。</p>
<h3 id="路由选择策略"><a href="#路由选择策略" class="headerlink" title="路由选择策略"></a>路由选择策略</h3><p>多宿接入ISP：经由两个不同的ISP连接到网络的其余部分的<br>经验法则：任何穿越某ISP主干网的流量必须是其源或目的（或两者）位于该ISP的某个客户网络中</p>
<h2 id="5-6-ICMP因特网控制报文协议"><a href="#5-6-ICMP因特网控制报文协议" class="headerlink" title="5.6 ICMP因特网控制报文协议"></a>5.6 ICMP因特网控制报文协议</h2><ul>
<li>ICMP报文<ul>
<li>用于主机和路由器彼此沟通网络层信息</li>
<li>承载在IP分组中</li>
<li>类型字段+编码字段，并且包含引起该ICMP报文首次生成的IP数据报的首部和前8个字节</li>
</ul>
</li>
<li>ping<ul>
<li>发送一个ICMP类型8编码0（回显请求）到指定主机</li>
<li>目的主机发回一个类型0编码0的ICMP回显应答</li>
</ul>
</li>
<li>traceroute<ul>
<li>跟踪从一台主机到世界上任意一台主机之间的路由</li>
<li>源主机发送一些列数据报，每个都携带一个具有不可达UDP端口号的UDP报文段，且第$n$个数据报的TTL为$n$</li>
<li>第$n$台路由器丢弃该数据报并发送一个ICMP告警报文（类型11编码0）给源主机</li>
<li>目的主机会向源主机发送一个端口不可达的ICMP报文（类型3编码3），源主机收到时就知道不需要再发送另外的探测分组。</li>
</ul>
</li>
</ul>
<h1 id="CH3-运输层"><a href="#CH3-运输层" class="headerlink" title="CH3 运输层"></a>CH3 运输层</h1><p>运输层为运行在不同主机上的应用程序之间提供了<strong>逻辑通信</strong>功能。通过逻辑通信，运行不同进程的主机好像直接相连一样。<br>应用进程使用运输层提供的逻辑通信功能彼此发送报文，而无须考虑承载这些报文的物理基础设施的细节。</p>
<p>运输层只工作在端系统中。在端系统中，运输层协议将来自应用进程的报文移动到网络边缘（即网络层）。<br>运输层能够提供的服务常常受制于底层网络协议的服务模型（带宽时延等），但底层网络协议不可靠、非机密性的情况下，运输层也能提供可靠性和机密性。</p>
<p>UDP和TCP最基本的责任是：将两个端系统间IP的交付服务扩展为运行在端系统上的两个进程之间的交付服务。<br>将主机间交付扩展到进程间交付被称为运输层的<strong>多路复用</strong>与<strong>多路分解</strong><br>网络层：主机$\Leftrightarrow$主机<br>运输层：进程$\Leftrightarrow$进程</p>
<h2 id="多路复用和多路分解"><a href="#多路复用和多路分解" class="headerlink" title="多路复用和多路分解"></a>多路复用和多路分解</h2><p>进程使用套接字作为与网络交互数据的门户，运输层将数据交付给套接字。<br>每个套接字有唯一标识符，标识符格式取决于它是UDP还是TCP套接字。</p>
<p>每个运输层报文段中具有几个字段。<br><strong>多路分解</strong>：（拆包）将运输层报文段中的数据交付到正确的套接字<br><strong>多路复用</strong>：（打包）从源主机的不同套接字中收集数据块，并为每个数据块封上首部信息从而生成报文段，然后将报文段传递到网络层</p>
<p>套接字要有唯一标识符、每个报文段有特殊字段来只是该报文段所要交付到的套接字，特殊字段即<strong>源端口号字段&amp;目的端口号字段</strong></p>
<p>端口号</p>
<ul>
<li>16比特数，大小在0~65535</li>
<li>0~1023称为<strong>周知端口号</strong>，保留给注入HTTP（80）和FTP（21）之类的周知应用层协议</li>
<li>开发新应用程序时必须为其分配一个端口号</li>
</ul>
<h3 id="UDP的多路复用与多路分解"><a href="#UDP的多路复用与多路分解" class="headerlink" title="UDP的多路复用与多路分解"></a>UDP的多路复用与多路分解</h3><p>创建套接字时，端口号有两种产生方式：</p>
<ul>
<li>运输层自动为套接字分配一个端口号，从1024~65535内选择一个当前未被该主机中任何其他UDP端口使用的号</li>
<li>通过套接字<code>bind()</code>(Python)方法为这个UDP套接字关联一个特定的端口号<br>通常应用程序自动，服务器手动</li>
</ul>
<p>一个UDP套接字是由一个二元组全面标识的，该二元组包含一个目的IP地址和一个目的端口号。<br>因此只要两个UDP报文段具有相同的目的IP地址和目的端口号，那么这两个报文段将通过相同的目的套接字被定向到相同的目的进程。</p>
<p>源端口号用于接收方发回给发送方</p>
<h3 id="TCP的多路复用与多路分解"><a href="#TCP的多路复用与多路分解" class="headerlink" title="TCP的多路复用与多路分解"></a>TCP的多路复用与多路分解</h3><p>TCP套接字由四元组（源IP地址、源端口号、目的IP地址、目的端口号）来标识<br>与UDP不同，两个不同源IP和或源端口号的TCP报文段将被定向到两个不同的套接字，除非TCP报文段携带了初始创建连接的请求</p>
<ul>
<li>TCP服务器应用程序有一个“欢迎套接字”，在某个特定端口上等待来自TCP客户的连接建立请求</li>
<li>TCP客户创建一个套接字并发送一个连接建立请求报文段</li>
<li>一条连接建立请求只不过是一个目的端口号为12000，TCP首部的特定“连接建立位”置位的TCP报文段，这个报文段也包含一个由客户选择的源端口号</li>
<li>当运行服务器进程的计算机的主机操作系统接收到具有目的端口号为12000的入连接请求报文段后，它就定位服务器进程，该进程正在端口号12000等待接收连接。该服务器进程会创建一个新的套接字。</li>
<li>新创建的报文设置好4个标识符，之后的报文段按照这4个标识符来定向。</li>
</ul>
<p>服务器主机支持很多并行的TCP套接字，每个套接字与一个进程相联系。</p>
<p>连接套接字与进程之间并非总是有着一一对应的关系（线程</p>
<h2 id="无连接运输：UDP"><a href="#无连接运输：UDP" class="headerlink" title="无连接运输：UDP"></a>无连接运输：UDP</h2><p>发送方和接收方的运输层实体之间没有握手——无连接的</p>
<p>e.g.DNS通常使用UDP应用层协议</p>
<h3 id="UDP的优点"><a href="#UDP的优点" class="headerlink" title="UDP的优点"></a>UDP的优点</h3><ul>
<li>关于发送什么数据以及何时发送的应用层控制更为精细。<ul>
<li>实时应用通常要求最小发送速率，不希望过分地延迟报文段的传送，且能容忍一些数据丢失</li>
</ul>
</li>
<li>无须连接建立，不会引入建立连接的时延</li>
<li>无连接状态，节约存储空间，可以支持更多活跃用户。</li>
<li>分组首部开销小，TCP20字节，UDP8自己</li>
</ul>
<h3 id="UDP报文段结构"><a href="#UDP报文段结构" class="headerlink" title="UDP报文段结构"></a>UDP报文段结构</h3><p><img src="/2019/10/12/network-notes/udp.png" alt=""></p>
<ul>
<li>源端口号/目的端口号（各16比特）</li>
<li>长度（16比特）：首部+数据的字节数</li>
<li>检验和</li>
<li>应用数据</li>
</ul>
<h3 id="UDP检验和"><a href="#UDP检验和" class="headerlink" title="UDP检验和"></a>UDP检验和</h3><p>实际包括一些IP首部字段，此处忽略</p>
<p>16比特字的反码运算，求和时遇到的任何溢出都被回卷（加到末尾去）<br>详见作业题CH6 P3</p>
<p>端到端原则：如果端到端传输服务要提供差错检测，UDP就必须在端到端基础上在运输层提供差错检测<br>“与在较高级别提供这些功能的代价相比，在较低级别上设置的功能可能是冗余的或几乎没有价值的”</p>
<p>不进行差错恢复，只能丢弃/交给应用程序并发出警告</p>
<h2 id="可靠数据传输原理"><a href="#可靠数据传输原理" class="headerlink" title="可靠数据传输原理"></a>可靠数据传输原理</h2><p>可靠数据传输协议服务抽象：数据通过可靠信道传输，传输数据比特不会受到损坏或丢失，而且所有数据都是按照其发送顺序进行交付</p>
<p>前提假设：底层信道不会对分组重排序</p>
<h3 id="构造可靠数据传输协议"><a href="#构造可靠数据传输协议" class="headerlink" title="构造可靠数据传输协议"></a>构造可靠数据传输协议</h3><p>肯定确认(ACK), 否定确认(NAK)<br>自动重传请求(ARQ)<br>停等协议：除非发送方确信接收方已经正确接收当前分组，否则发送方将不会发送一块新数据<br>一个ACK丢失、或者只是该分组或ACK过度延时，发送方都进行重传<br>比特交替协议：rdt3.0</p>
<h3 id="流水线可靠数据传输协议"><a href="#流水线可靠数据传输协议" class="headerlink" title="流水线可靠数据传输协议"></a>流水线可靠数据传输协议</h3><p> 停等协议：发送方利用率低</p>
<script type="math/tex; mode=display">U_{\text{sender}}=\frac{L/R}{RTT+L/R}</script><p>流水线：不以停等方式运行，允许发送放发送多个分组而无须等待确认</p>
<h4 id="回退N步（GBN）"><a href="#回退N步（GBN）" class="headerlink" title="回退N步（GBN）"></a>回退N步（GBN）</h4><p>$N$：在流水线中未确认分组数的最大允许数</p>
<p>base：最早未确认分组的序号</p>
<p>nextseqnum: 最小的未使用序号（即下一个待发分组的序号</p>
<p>GBN也称滑动窗口协议，$N$也被称为窗口长度</p>
<p>分组序号用$k$位表示，所有涉及序号的运算采用模$2^k$运算</p>
<p><img src="/2019/10/12/network-notes/gbn_snd.png" alt=""></p>
<p><img src="/2019/10/12/network-notes/gbn_rcv.png" alt=""></p>
<p>GBN发送方必须响应三种类型的事件：</p>
<ul>
<li>上层的调用</li>
<li>收到一个ACK。 累积确认</li>
<li>超时事件。发送方重传所有已发送单未被确认过的分组。</li>
</ul>
<p>GBN接收方：</p>
<ul>
<li>如果正确接到一个按序分组，则为该分组发送一个ACK</li>
<li>否则丢弃该分组，并为最近按序接收的一个分组重新发送ACK</li>
<li>丢弃所有失序分组</li>
</ul>
<p>发送方维护窗口的上下边界及nextseqnum在该窗口中的位置</p>
<p>接收方维护下一个按序接收的分组的序号(expectedseqnum)</p>
<p>问题：单个分组的差错就能引起重传大量分组，许多分组根本没有必要重传</p>
<h4 id="选择重传（SR）"><a href="#选择重传（SR）" class="headerlink" title="选择重传（SR）"></a>选择重传（SR）</h4><p>发送方：</p>
<ul>
<li>从上层收到数据。检查下一个可用于该分组的序号，如果序号位于发送方窗口内，则将数据打包发送。</li>
<li>超时。每个分组有自己的逻辑定时器，超时发生后只发送一个分组。</li>
<li>收到ACK。如果收到ACK的序号在窗口内，则SR发送方将那个被确认的分组标记为已接收。如果该分组序号等于send base，则窗口基序号向前移动到具有最小序号的未确认分组处。如果窗口移动了并且有序号落在窗口内的未发送分组，则发送这些分组。</li>
</ul>
<p>接收方：</p>
<ul>
<li>序号在$[$rcv_base, rcv_base+$N$-1$]$内的分组被正确接收。在此情况下，收到的分组落在接收方的窗口内，一个选择ACK被会送给发送方。如果该分组以前没收到过，则缓存该分组。如果该分组的序号等于接收窗口的基序号，则该分组以及以前缓存的序号连续的分组交付给上层。然后，接收窗口按向前移动分组的编号向上交付这些分组。</li>
<li>序号在$[$rcv_bas-$N$,  rcv_base-1$]$内的分组被正确收到。必须产生一个ACK，即使该分组是接收方以前已确认过的分组。（如果不确认，则发送窗口将永远不能向前滑动）</li>
<li>其他情况。忽略该分组。</li>
</ul>
<p>SR接收方将确认一个正确接收的分组而不管其是否按序。失序的分组将被缓存直到所有丢失分组皆被收到为止。</p>
<p>SR协议对于哪些分组已经被正确接收，哪些没有，发送方和接收方并不总是能看到相同的结果。发送方和接收方的窗口并不总是一致。</p>
<p>窗口长度必须小于等于序号空间大小的一半。</p>
<p>考虑分组重排</p>
<ul>
<li>当连接两端的信道是一个网络时会发生</li>
<li>信道可以看成基本上是在缓存分组，并在将来任意时刻自然地释放出这些分组。</li>
<li>通过假定一个分组在网络中“存活”的时间不会超过某个固定最大时间量来做到这一点。</li>
</ul>
<h2 id="面向连接的运输：TCP"><a href="#面向连接的运输：TCP" class="headerlink" title="面向连接的运输：TCP"></a>面向连接的运输：TCP</h2><h3 id="TCP连接"><a href="#TCP连接" class="headerlink" title="TCP连接"></a>TCP连接</h3><p>两个进程在发送数据之前必须先相互“握手”，即它们必须互相发送某些预备报文段，以建立确保数据传输的参数</p>
<p>TCP连接是一条逻辑连接，其共同状态仅保留在两个通信端系统的TCP程序中，中间网络元素不会维持TCP连接状态。</p>
<ul>
<li>全双工服务（full-duplex service）：如果进程A与进程B存在一条TCP连接，则应用层数据可以在这两台主机间双向流动</li>
<li>点对点：单个发送方与单个接收方之间的连接</li>
</ul>
<p>发起连接的称为客户进程，另一个进程被称为服务器连接</p>
<ul>
<li>客户进程通过套接字（该进程之门）传递数据流，TCP将这些数据引导到该连接的<strong>发送缓存</strong>里</li>
<li>TCP会时不时从发送缓存里取出一块数据，并将数据传递到网络层<ul>
<li>TCP可放入报文段的最大数据数量受限于<strong>最大报文段长度</strong>(MSS)</li>
<li>MSS通常根据最初确定的由本地发送主机的最大链路层帧长度（最大传输单元MTU）来设置</li>
<li>MSS要保证一个TCP报文段+TCP/IP首部长度（通常40字节）小于等于单个链路层帧长度</li>
<li>MSS指报文段里<strong>应用层数据</strong>的最大长度，不包括首部</li>
</ul>
</li>
<li>TCP在另一端接收到报文段后，该报文段的数据就被放入该TCP连接的接收缓存中</li>
</ul>
<p>TCP连接组成包括：两台主机上的缓存、变量与进程连接的套接字</p>
<h3 id="TCP报文段结构"><a href="#TCP报文段结构" class="headerlink" title="TCP报文段结构"></a>TCP报文段结构</h3><p><img src="/2019/10/12/network-notes/tcp.png" alt=""></p>
<ul>
<li>源端口号和目的端口号（各16比特）</li>
<li>序号和确认号（各32比特）：用来实现可靠数据传输服务</li>
<li>接收窗口字段（16比特）：用于流量控制，表示接收方 愿意接收的字节数量</li>
<li>首部长度字段（4比特）：指示了以32比特为单位的TCP首部长度。TCP首部长度可变，但通常是20字节。</li>
<li>标志字段（6比特）：一些flag<ul>
<li>ACK：用于指示确认字段中的值是有效的</li>
<li>RST、SYN、FIN：用于连接的建立和拆除</li>
<li>CER、ECE：明确拥塞通告中使用</li>
<li>PSH：指示接收方应该立即将数据交给上层</li>
<li>URG：指示报文段里存在着被发送端的上层实体置为“紧急的数据”，紧急数据指针指出紧急数据的最后一个字节。当紧急数据存在并给出紧急数据指针时，TCP必须通知接收端的上层实体。</li>
</ul>
</li>
<li>因特网检验和（16比特）</li>
<li>可选与变长的选项字段：用于发送方与接收方协商MSS，或在高速网络环境下用作窗口调节因子</li>
</ul>
<h4 id="序号和确认号"><a href="#序号和确认号" class="headerlink" title="序号和确认号"></a>序号和确认号</h4><p>TCP把数据看成无结构的、有序的字节流。一个报文段的序号是该报文段首字节的字节流编号。</p>
<p>主机A填充进报文段的确认号是主机A期望从主机B收到的下一字节的序号。</p>
<p>TCP只确认流中至第一个丢失字节为止的字节，这个称为提供<strong>累计确认</strong>。    </p>
<p>主机在一条TCP连接中收到失序报文段视为UB。</p>
<p>一条TCP连接的双方均可随机地选择初始号。</p>
<p>和（16比特）</p>
<p>可选与变长的选项字段：用于发送方与接收方协商MSS，或在高速网络环境下用作窗口调节因子举例：Telnet的回显</p>
<p><img src="/2019/10/12/network-notes/telnet.png" alt=""></p>
<p>（解释见书p157)</p>
<p>对客户到服务器的数据的确认被装载在一个承载服务器到客户的数据的报文段，这种确认被称为是被<strong>捎带</strong>在服务器到客户的数据报文段中的。</p>
<h3 id="往返时间估计与超时"><a href="#往返时间估计与超时" class="headerlink" title="往返时间估计与超时"></a>往返时间估计与超时</h3><ul>
<li>报文段的样本RTT(SampleRTT)：从某报文段被发出大多数TCP仅在某个时刻做一次SampleRTT测量<ul>
<li>在任意时刻，仅为一个已发送但目前尚未被确认的报文段估计SampleRTT，从而产生一个接近每个RTT值的新SampleRTT</li>
<li>TCP绝不为已被重传的报文段计算SampleRTT，仅为传输一次的报文段测量</li>
</ul>
</li>
<li>EstimatedRTT：TCP维护的SampleRTT的均值，为了应对SampleRTT的波动<ul>
<li>一旦获得新的SampleRTT，更新公式为 <script type="math/tex">\text{EstimatedRTT}=(1-\alpha)\cdot\text{EstimatedRTT}+\alpha\cdot\text{SampleRTT}</script>，$\alpha$的推荐值为0.125(1/8)</li>
<li>EstimatedRTT是对SampleRTT的<strong>指数加权移动平均</strong>（EWMA，Exponential Weighted Moving Average），指一个给定的SampleRTT的权值在更新过程中呈指数型快速衰减</li>
</ul>
</li>
<li>DevRTT：RTT偏差，用于估算SampleRTT一般会偏离EstimatedRTT的程度<ul>
<li>计算公式为<script type="math/tex">\text{DevRTT}=(1-\beta)\cdot\text{DevRTT}+\beta\cdot|\text{SampleRTT}-\text{EstimatedRTT}|</script>，$\beta$的推荐取值为0.25</li>
</ul>
</li>
<li>超时间隔TimeoutInterval：EstimatedRTT加上一定余量，与SampleRTT的波动正相关<ul>
<li>计算公式为<script type="math/tex">\text{TimeoutInterval}=\text{EstimatedRTT}+4\cdot\text{DevRTT}</script></li>
<li>推荐的TimeoutInterval的初始值为1s</li>
<li>当出现超时后，TimeoutIntetval将加倍，以免即将被确认的后继报文段过早出现超时。</li>
<li>只要收到报文段并更新EstimatedRTT，就更新TimeoutInterval</li>
</ul>
</li>
</ul>
<h3 id="可靠数据传输"><a href="#可靠数据传输" class="headerlink" title="可靠数据传输"></a>可靠数据传输</h3><p>TCP的差错恢复机制是GBN和SR的混合体</p>
<p>发送方：switch(事件)</p>
<ul>
<li><p>从上面应用程序接收到数据</p>
<ul>
<li>生成具有序号NextSeqNum的TCP报文段</li>
<li>如果定时器没有运行，启动定时器</li>
<li>向IP传递报文段</li>
<li>NextSeqNum=NextSeqNum+length(data)</li>
</ul>
</li>
<li><p>定时器超时</p>
<ul>
<li>重传具有最小序号但仍未应答的报文段</li>
<li>超时间隔<s>超级</s>加倍</li>
<li>启动定时器</li>
</ul>
</li>
<li><p>收到ACK，ACK字段值为y</p>
<ul>
<li><p>如果 y&gt;SendBase，则该ACK是在确认一个或多个先前未确认的报文段</p>
<ul>
<li>更新SendBase</li>
<li>如果当前有未被确认的报文段，  重新启动定时器</li>
</ul>
</li>
<li><p>如果 y&lt;=SendBase，则该ACK是对已经确认的报文段的一个冗余ACK</p>
<ul>
<li>如果累计收到相同ACK值的3个冗余ACK（累计4个相同ACK），则重新发送具有序号y的报文段（快速重传）</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>接收方：  <img src="/2019/10/12/network-notes/tcp_rcv.png" alt=""></p>
<p>超时间隔加倍提供了一个形式受限的拥塞控制，因为定时器过期很可能是网络拥塞引起的。</p>
<h4 id="快速重传"><a href="#快速重传" class="headerlink" title="快速重传"></a>快速重传</h4><p>冗余ACK：再次确认某个报文段的ACK</p>
<p>当TCP接收方接收到一个序号大于下一个所期望按序报文段的报文段时，就说明有报文段丢失，因此会产生一个冗余ACK对已经收到的最后一个按序字节数据进行重复确认。</p>
<p>如果发送方接收到对相同数据的3个冗余ACK，就将其视为一种指示，说明这个被确认了3次的报文段之后的报文段已经被丢失。发送方会进行<strong>快速重传</strong>，即在该报文段的定时器过期之前重传丢失的报文段。</p>
<h3 id="流量控制"><a href="#流量控制" class="headerlink" title="流量控制"></a>流量控制</h3><p>接收方如果读数据不够快，就会导致接收缓存溢出。TCP提供了<strong>流量控制服务</strong>以消除发送方使接收方缓存溢出的可能性。（区分流量控制与拥塞控制）</p>
<p>TCP发送方维护一个称为<strong>接收窗口</strong>的变量，指示接收方还有多少可用空间，需要满足</p>
<ul>
<li><script type="math/tex; mode=display">\text{LastByteRcvd}-\text{LastByteRead}\le \text{RcvBuffer}</script></li>
<li>接收窗口长度用rwnd表示，<script type="math/tex">\text{rwnd}=\text{RcvBuffer}-[\text{LastByteRcvd}-\text{LastByteRead}]</script></li>
<li><script type="math/tex; mode=display">\text{LastByteSent}-\text{LastByteAcked}\le\text{rwnd}</script></li>
<li>人话：主机Ａ发送但未被确认的数据大小　不会超过　主机Ｂ接收缓存的剩余可用空间</li>
</ul>
<p>为了防止主机A被阻塞，当主机B的接收窗口为0时，主机A继续发送只有一个字节数据的报文段。这些报文段将会被接收方确认。最终缓存开始清空，并且确认报文里包含一个非0的rwnd值。</p>
<h3 id="TCP连接管理"><a href="#TCP连接管理" class="headerlink" title="TCP连接管理"></a>TCP连接管理</h3><h4 id="建立TCP连接：三次握手"><a href="#建立TCP连接：三次握手" class="headerlink" title="建立TCP连接：三次握手"></a>建立TCP连接：三次握手</h4><p><img src="/2019/10/12/network-notes/start_tcp.png" alt=""></p>
<ul>
<li>第一步：客户端的TCP向服务器的TCP发送一个<strong>SYN报文段</strong>。首部中SYN标志位被置为1。客户随机选择一个初始序号（client_isn），并将此序号放置于SYN报文段的序号字段。该报文段不包含应用层数据。</li>
<li>第二步：服务器主机收到该TCP SYN报文段，为该TCP连接分配TCP缓存和变量，并向该客户TCP发送允许连接的报文段（<strong>SYNACK报文段</strong>）。该报文段不包含应用层数据。SYN比特被置为1。首部确认号字段为client_isn+1。服务器选择自己的初始序号（server_isn），并将其放到序号字段中。</li>
<li>第三步：在收到SYNACK报文段后，客户也要给该连接分配缓存和变量。客户主机向服务器发送另一个报文段，将server_isn+1放到首部的确认字段，来对服务器的允许连接的报文段进行确认。连接已经建立了，所以SYN比特被置为0，且之后的每一个报文段的SYN比特都为0。该报文段可以携带应用层数据。</li>
</ul>
<h3 id="关闭TCP连接"><a href="#关闭TCP连接" class="headerlink" title="关闭TCP连接"></a>关闭TCP连接</h3><p><img src="/2019/10/12/network-notes/close_tcp.png" alt=""></p>
<ul>
<li>客户进程发出一个关闭连接命令，引起客户TCP向服务器进程发送一个特殊的TCP报文段。该报文段首部FIN比特被置为1。</li>
<li>服务器接收到该报文段后，向发送方回送一个ACK报文段。</li>
<li>然后，服务器发送自己的终止报文段，FIN置为1。</li>
<li>最后，客户对这个服务器的终止报文段进行确认。此时，两台主机上用于该连接的所有资源都被释放了。</li>
</ul>
<h4 id="TCP状态"><a href="#TCP状态" class="headerlink" title="TCP状态"></a>TCP状态</h4><p><img src="/2019/10/12/network-notes/tcp_client.png" style="zoom:70%;"></p>
<p><img src="/2019/10/12/network-notes/tcp_server.png" style="zoom:70%;"></p>
<p>如果一台主机接收到的一个TCP报文段端口号或源IP地址与该主机上进行中的套接字都不匹配，则该主机向源发送一个特殊重置报文段，RST标志被置为1。（“我没有那个报文段的套接字，请不要再发了。”）</p>
<h4 id="nmap端口扫描工具"><a href="#nmap端口扫描工具" class="headerlink" title="nmap端口扫描工具"></a>nmap端口扫描工具</h4><p>nmap对目标主机的某个端口发送一个特殊的TCP SYN数据报，有3种可能</p>
<ul>
<li>源主机从目标主机接收到一个TCP SYNACK报文段。这意味着目标主机上一个应用程序使用该TCP端口运行，nmap返回“打开”。</li>
<li>源主机从目标主机接收到一个TCP RST报文段。这意味着目标主机上没有一个应用程序使用该TCP端口运行，但至少发送向该端口的报文段没有被防火墙阻拦。</li>
<li>源什么也没有收到。防火墙GG。</li>
</ul>
<h2 id="拥塞控制原理"><a href="#拥塞控制原理" class="headerlink" title="拥塞控制原理"></a>拥塞控制原理</h2><h3 id="情况1：两个发送方和一台具有无穷大缓存的路由器"><a href="#情况1：两个发送方和一台具有无穷大缓存的路由器" class="headerlink" title="情况1：两个发送方和一台具有无穷大缓存的路由器"></a>情况1：两个发送方和一台具有无穷大缓存的路由器</h3><p><img src="/2019/10/12/network-notes/case1.png" style="zoom:60%;"></p>
<p><img src="/2019/10/12/network-notes/case1_2.png" style="zoom:60%;"></p>
<ul>
<li>图一为每连接的吞吐量（接收方每秒接收的字节数）与该连接发送速率之间的函数关系。上限$R/2$是由共享链路容量造成的。</li>
<li>图二为时延与发送速率的关系。当发送速率接近$R/2$时，平均时延就会越来越大。当发送速率超过$R/2$，路由器中 的平均排队分组数就会无限增长。</li>
<li>当分组到达的速率接近链路容量时，分组会经历巨大的排队时延。</li>
</ul>
<h3 id="情况2：两个发送方和一台具有有限缓存的路由器"><a href="#情况2：两个发送方和一台具有有限缓存的路由器" class="headerlink" title="情况2：两个发送方和一台具有有限缓存的路由器"></a>情况2：两个发送方和一台具有有限缓存的路由器</h3><p><img src="/2019/10/12/network-notes/case2.png" style="zoom:60%;"></p>
<p>$\lambda_{in}$（字节/秒）：应用程序将初始数据发送到套接字的速率</p>
<p>$\lambda_{in}’$：运输层想网络中发送报文段（初始+重传）的速率，又称<strong>供给载荷</strong></p>
<ul>
<li>图a为主机A成精，仅当路由器缓存空闲时发送分组的理想情况，平均速率不会超过$R/2$</li>
<li>图b为发送方仅当在确定了一个分组已经丢失时才重传的情况。$R/3$是术师数据，$R/2-R/3=R/6$是重传数据。说明拥塞时发送方必须执行重传以补偿因为缓存溢出而丢失的分组。</li>
<li>图c为发送方提前发生超时并重传未被丢失的分组。由于每个分组被转发两次，当其供给载荷接近$R/2$时，吞吐量接近$R/4$。说明拥塞时发送方在遇到大时延时所进行的不必要重传会引起路由器利用其链路带宽来转发不必要的分组副本。</li>
</ul>
<h3 id="情况3-4个发送方和具有有限缓存的多台路由器及多跳路径"><a href="#情况3-4个发送方和具有有限缓存的多台路由器及多跳路径" class="headerlink" title="情况3:4个发送方和具有有限缓存的多台路由器及多跳路径"></a>情况3:4个发送方和具有有限缓存的多台路由器及多跳路径</h3><p><img src="/2019/10/12/network-notes/case3.png" style="zoom:60%;"></p>
<ul>
<li>对于较小的$\lambda<em>{in}$，$\lambda</em>{in}$的增大会导致$\lambda_{out}$的增大</li>
<li>当$\lambda_{in}$很大的时候，不同路径的流量会在同一个路由器上为有限缓存空间竞争，导致一条路径成功通过的流量越来越少。</li>
<li>在极限重载情况下，端到端吞吐量会趋近于0。</li>
<li>当一个分组沿一条路径被丢弃时，每个上游路由器用于转发该分组到丢弃该分组而使用的传输容量全部木大了。</li>
</ul>
<h3 id="拥塞控制方法"><a href="#拥塞控制方法" class="headerlink" title="拥塞控制方法"></a>拥塞控制方法</h3><ul>
<li>端到端拥塞控制：网络没有为运输层拥塞控制提供显示支持</li>
<li>网络辅助的拥塞控制：路由器发送方提供关于网络中拥塞状态的显示反馈信息。可以用拥塞分组直接反馈给发送方，或通过标记接收方来的分组来通知发送方。</li>
</ul>
<h2 id="TCP拥塞控制"><a href="#TCP拥塞控制" class="headerlink" title="TCP拥塞控制"></a>TCP拥塞控制</h2><p>让每一个发送方根据所感知到的网络拥塞成都来限制其发送流量的速率。</p>
<p>发送方TCP跟踪一个<strong>拥塞窗口</strong>变量cwnd，它对一个TCP发送方能向网络中发送流量的速率进行了限制。</p>
<script type="math/tex; mode=display">\text{LastByteSent}-\text{LastByteAcked}\le\min\{\text{cwnd},\text{rwnd}\}</script><p>发送方的速率大概是cwnd/RTT字节/秒。</p>
<p>丢包事件：出现超时，或收到来自接收方的3个冗余ACK。此时发送方认为出现了拥塞指示。</p>
<p>自计时：TCP使用收到的ACK（或计时）增大它的拥塞窗口长度。</p>
<h3 id="TCP拥塞控制算法"><a href="#TCP拥塞控制算法" class="headerlink" title="TCP拥塞控制算法"></a>TCP拥塞控制算法</h3><p>具体看图</p>
<p><img src="/2019/10/12/network-notes/congestion_control.png" alt=""></p>
<h4 id="慢启动"><a href="#慢启动" class="headerlink" title="慢启动"></a>慢启动</h4><ul>
<li>当一条TCP连接开始时，cwnd通常设为一个MSS的较小值，初始发送速率大约为MSS/RTT。</li>
<li>每当传输的报文段首次被确认，cwnd增加一个MSS（指数增长</li>
<li>结束方式<ul>
<li>当cwnd==ssthresh时，结束慢启动并转移到拥塞避免模式。cwnd最多只能取到ssthresh，即使不是2的幂次</li>
<li>超时丢包（拥塞）：cwnd重置为1并重新开始慢启动过程，ssthresh(慢启动阈值)变为cwnd/2</li>
<li>检测到3个冗余ACK：执行一次快速重传并进入快速恢复状态</li>
</ul>
</li>
</ul>
<h4 id="拥塞避免"><a href="#拥塞避免" class="headerlink" title="拥塞避免"></a>拥塞避免</h4><ul>
<li>每个RTT只将cwnd的值增加MSS。一种通用实现方法：发送方无论何时收到一个新的确认，就将cwnd增加一个$\text{MSS}\frac{\text{MSS}}{\text{cwnd}}$字节。</li>
<li>结束方式<ul>
<li>超时：cwnd重置为1并重新开始慢启动过程，ssthresh(慢启动阈值)变为cwnd/2</li>
<li>3个冗余ACK：cwnd减半，对收到的3个冗余ACK再加上3个MSS；将ssthresh的值改为cwnd/2；进入快速恢复状态</li>
</ul>
</li>
</ul>
<h4 id="快速恢复"><a href="#快速恢复" class="headerlink" title="快速恢复"></a>快速恢复</h4><ul>
<li>对于引起TCP进入快速恢复状态的缺失报文段，对每个收到的冗余ACK，cwnd增加一个MSS</li>
<li>当最终对丢失报文段的一个ACK到达时，TCP在降低cwnd后进入拥塞避免状态</li>
<li>超时：cwnd重置为1并重新开始慢启动过程，ssthresh(慢启动阈值)变为cwnd/2，进入慢启动状态</li>
</ul>
<p>忽略慢启动，TCP的拥塞控制：每个RTT内线性增加1MSS，出现3个冗余ACK时cwnd减半——加性增，乘性减（AIMD）</p>
<h4 id="吞吐量-1"><a href="#吞吐量-1" class="headerlink" title="吞吐量"></a>吞吐量</h4><p>一条连接的平均吞吐量<script type="math/tex">=\frac{0.75\times W}{\text{RTT}}</script></p>
<ul>
<li>$W$：丢包事件发生时的窗口长度</li>
<li>TCP的发送速率大约是$w/RTT$,$w$为窗口长度</li>
<li>TCP的传输速率在$W/(2\times\text{RTT})$和$W/\text{RTT}$之间线性变化</li>
</ul>
<p>考虑丢包率（$L$）和MSS，一条连接的平均吞吐量<script type="math/tex">=\frac{1.22\times\text{MSS}}{\text{RTT}\sqrt{L}}</script></p>
<h3 id="公平性"><a href="#公平性" class="headerlink" title="公平性"></a>公平性</h3><p>如果每条连接都得到相同份额的带宽，则认为该拥塞控制机制是公平的。</p>
<p><img src="/2019/10/12/network-notes/fair.png" style="zoom:50%;"></p>
<p>实际情况下具有较小RTT的连接能够更快地抢到可用带宽。</p>
<p>UDP是无法无天的，并行TCP连接是“作弊”</p>
<h1 id="CH9-多媒体网络"><a href="#CH9-多媒体网络" class="headerlink" title="CH9 多媒体网络"></a>CH9 多媒体网络</h1><h2 id="多媒体网络应用"><a href="#多媒体网络应用" class="headerlink" title="多媒体网络应用"></a>多媒体网络应用</h2><ul>
<li>视频的性质<ul>
<li>最显著的特点：高比特率</li>
<li>能被压缩。在视频质量与比特率间折中</li>
</ul>
</li>
<li>音频的性质<ul>
<li>脉冲编码调制(PCM)：数字信号速率=每秒的采样个数×每个样本的表示比特数</li>
</ul>
</li>
<li>多媒体网络应用的性质<ul>
<li>流式存储音频和视频<ul>
<li>流：边看边接收后续部分</li>
<li>相互作用：暂停、快进、快退</li>
<li>连续播放：减少帧停滞或帧跳过</li>
</ul>
</li>
<li>实时会话式语音<ul>
<li>因特网电话，IP语音（VoIP）</li>
<li><strong>定时考虑</strong>很重要，高度时延敏感</li>
<li>容忍丢包：偶尔的丢失只会在音频视频回放时出现干扰信号</li>
</ul>
</li>
<li>流式实况音频视频（直播）<ul>
<li>类似流式存储</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="流式存储视频"><a href="#流式存储视频" class="headerlink" title="流式存储视频"></a>流式存储视频</h2><p>三种形式的视频流，共同特点：广泛使用了客户端应用缓存，以此来缓解端到端时延的变化和服务器和客户之间可用带宽量的影响。</p>
<p><img src="/2019/10/12/network-notes/9-1.png" style="zoom:50%;"></p>
<p>客户缓存的优点：</p>
<ul>
<li>能够吸收服务器到客户端时延中的波动</li>
<li>如果服务器到客户端带宽暂时低于视频消耗速率，用户能够继续享受连续的播放，只要客户缓存没有耗尽</li>
</ul>
<h3 id="UDP流"><a href="#UDP流" class="headerlink" title="UDP流"></a>UDP流</h3><p>服务器通过UDP以一宗稳定的速率记录下视频块，用于客户的视频消耗速率相匹配的速率传输视频。<br>UDP流通常使用很小的客户端缓存，空间维持小于1s视频就够了。<br>服务器和客户间还并行地维护一个单独的控制连接，客户可发送有关会话状态变化的命令（暂停、重开、重定位等）。</p>
<p>不足：</p>
<ul>
<li>可用带宽变化且无法预测，恒定速率UDP流不能够提供连续的播放。</li>
<li>要求如RTSP服务器一样的媒体控制服务器，增加了部署的总体成本和复杂性。</li>
<li>许多防火墙和NAT阻塞UDP流量</li>
</ul>
<h3 id="HTTP流"><a href="#HTTP流" class="headerlink" title="HTTP流"></a>HTTP流</h3><p>视频直接作为具有一个特定URL（统一资源定位符）的普通文件存储在HTTP服务器上。<br>用户要看视频时，客户和服务器之间建立一个TCP连接，并且发送一个对该URL的HTTP GET请求，服务器尽可能快地发送该视频文件；客户端把字节收集在一个客户应用缓存中。一旦缓存数量超过预先设定的阈值就开始播放。</p>
<ul>
<li><strong>预取</strong>视频：客户能够尝试以高于消耗速率的速率下载视频，预取将来会被消耗的视频帧。</li>
<li><strong>客户端应用缓存和TCP缓存</strong>：<ul>
<li><img src="/2019/10/12/network-notes/9-2.png" style="zoom:50%;"></li>
<li>暂停期间，客户缓存会变满，对服务器造成“反向压力”。服务器被阻塞，直到用户恢复该视频。因此服务器发送速率不能比客户端视频消耗速率更高。一个满的客户应用缓存间接地对服务器到客户能够发送的视频速率增加了限制。</li>
</ul>
</li>
<li>流式视频的分析<ul>
<li>$B$：客户端应用缓存的长度（比特）；$Q$：客户应用缓存开始播放之前必须被缓存的比特数量；$r$：视频消耗速率；$x$：服务器发送速率</li>
<li>初始缓存时延$t_p=Q/x$</li>
<li>客户应用缓存变慢时间$t_f$：显然。</li>
</ul>
</li>
<li>视频的早期中止和定位<ul>
<li>利用HTTP GET请求报文中的<strong>HTTP字节范围首部</strong>：指示了客户当前要从所希望的视频中获取的字节范围。</li>
<li>当用户重新定位到一个新位置时，客户发送一个新的HTTP请求，用字节范围首部指出服务器应当从文件的哪个字节起发送数据</li>
<li>预取的数据没看会导致网络带宽和服务器资源的浪费，因此许多流系统仅使用长度适当的客户应用缓存或者限制字节范围首部预取的视频数量。</li>
</ul>
</li>
</ul>
<h2 id="IP语音"><a href="#IP语音" class="headerlink" title="IP语音"></a>IP语音</h2><h3 id="尽力而为的服务限制"><a href="#尽力而为的服务限制" class="headerlink" title="尽力而为的服务限制"></a>尽力而为的服务限制</h3><p>什么时候播放一个块&amp;如何处理一个丢失块</p>
<h4 id="丢包"><a href="#丢包" class="headerlink" title="丢包"></a>丢包</h4><p>TCP的重传机制增加了端到端时延，拥塞控制可能导致“缓存饥饿”，因此所有现有的VoIP应用默认运行在UDP上</p>
<h4 id="端到端时延"><a href="#端到端时延" class="headerlink" title="端到端时延"></a>端到端时延</h4><p>时延超过某阈值的分组等效于丢弃</p>
<h4 id="分组时延抖动"><a href="#分组时延抖动" class="headerlink" title="分组时延抖动"></a>分组时延抖动</h4><p>时延抖动：不同的分组端到端时延可能会有波动<br>通常可以通过序号、时间戳和播放时延来消除</p>
<h3 id="在接收方消除音频的时延抖动"><a href="#在接收方消除音频的时延抖动" class="headerlink" title="在接收方消除音频的时延抖动"></a>在接收方消除音频的时延抖动</h3><p>通常结合以下两种机制：</p>
<ul>
<li>每个块预先计划一个时间戳</li>
<li>在接收方延迟播放块</li>
</ul>
<h4 id="固定播放时延"><a href="#固定播放时延" class="headerlink" title="固定播放时延"></a>固定播放时延</h4><p>接收方试图在块产生正好$q$ms后播放它<br>如果端到端时延经常发生比较大的变化，用一个大的$q$更好；如果时延很小并且时延变化也很小，用一个较小的、可能小于150ms的$q$更好</p>
<h4 id="适应性延迟播放"><a href="#适应性延迟播放" class="headerlink" title="适应性延迟播放"></a>适应性延迟播放</h4><p>目标：播放时延最小化，使丢包低于一定的百分比<br>估计网络时延和变化，在每个话音突峰期的开始相应地调整播放时延</p>
<ul>
<li>$t_i$：第$i$个分组的时间戳，该分组在发送方产生的时间</li>
<li>$r_i$：分组$i$被接收方接收的时间</li>
<li>$p_i$：分组$i$在接收方播放的时间</li>
<li>$d<em>i=(1-u)d</em>{i-1}+u(r_i-t_i)$：接收到第$i$分组时的平均网络时延的估计值，$u$为固定的常数</li>
<li>$v<em>i=(1-u)v</em>{i-1}+u|r_i-t_i-d_i$：与估计平均时延的绝对偏差的估计值</li>
<li>$p_i=t_i+d_i+Kv_i$</li>
<li>在一个话音突峰期中任何后续分组的播放点被计算为相对于这个话音突峰期第一个分组播放时间点的偏移</li>
<li>类似TCP的拥塞控制</li>
</ul>
<h3 id="从丢包中恢复"><a href="#从丢包中恢复" class="headerlink" title="从丢包中恢复"></a>从丢包中恢复</h3><h4 id="前向纠错（FEC）"><a href="#前向纠错（FEC）" class="headerlink" title="前向纠错（FEC）"></a>前向纠错（FEC）</h4><p>基本思想：给初始分组增加冗余信息<br>第一种机制：每发送$n$个块之后发送一个冗余编码的块（前$n$个块的异或和）。增加了播放时延。<br>第二种机制：发送一个较低分辨率的音频作为冗余信息。接收方在播放前只需接收两个分组，因此增加的时延小，且传输速率的额外增加并不大。</p>
<h4 id="交织"><a href="#交织" class="headerlink" title="交织"></a>交织</h4><p><img src="/2019/10/12/network-notes/9-6.png" style="zoom:30%;"></p>
<p>优点：能够明显提高音频流可感觉到的质量；不增加流的带宽要求<br>缺点：增加了时延</p>
<h4 id="差错掩盖"><a href="#差错掩盖" class="headerlink" title="差错掩盖"></a>差错掩盖</h4><p>为丢失的分组产生一个替代物（如重复）<br>音频信号呈现出大量的短期自相似性<br>适合于工作在相对小的丢包率和小分组的情况</p>
<h2 id="实时会话式应用的协议"><a href="#实时会话式应用的协议" class="headerlink" title="实时会话式应用的协议"></a>实时会话式应用的协议</h2><p><u>此处懒得抄</u></p>
<h2 id="支持多媒体的网络"><a href="#支持多媒体的网络" class="headerlink" title="支持多媒体的网络"></a>支持多媒体的网络</h2><h3 id="提供多种类型的服务"><a href="#提供多种类型的服务" class="headerlink" title="提供多种类型的服务"></a>提供多种类型的服务</h3><p>链路调度规则：选择在链路上传输排队分组的方式</p>
<h4 id="监管：漏桶"><a href="#监管：漏桶" class="headerlink" title="监管：漏桶"></a>监管：漏桶</h4><p>3个准则：平均速率、峰值速率、突发长度</p>
<ul>
<li>漏桶由一个能容纳$b$个令牌的桶组成</li>
<li>新令牌总是以每秒$r$个速率产生</li>
<li>当产生一个令牌时，如果桶中少于$b$个令牌，则新产生的令牌加入到桶中，否则忽略</li>
<li>一个分组向网络传输之前，必须首先从令牌桶中去除一个令牌，如果令牌桶是空的，分组必须等待一个令牌。</li>
<li>漏桶监管的流的<strong>最大突发长度</strong>是$b$个分组，任何长度为$t$的时间间隔内能够进入网络中的最大分组数目为$rt+b$（<strong>平均速率</strong>）</li>
<li>在原漏桶下方再加一个令牌产生速率为$p$漏桶可以实现限制<strong>峰值速率</strong>到$p$</li>
</ul>
<h4 id="漏桶-加权公平排队-队列中可证明的最大时延"><a href="#漏桶-加权公平排队-队列中可证明的最大时延" class="headerlink" title="漏桶+加权公平排队=队列中可证明的最大时延"></a>漏桶+加权公平排队=队列中可证明的最大时延</h4><script type="math/tex; mode=display">d_{max}=\frac{b_i}{R\cdot \frac{w_i}{\sum w_j}}</script><h1 id="口嗨考题"><a href="#口嗨考题" class="headerlink" title="口嗨考题"></a>口嗨考题</h1><ul>
<li>IPv4的首部的哪些字段经过中间路由器的时候不会被修改？考虑NAT和不考虑NAT。（以前出过，可能还会考到</li>
<li>(ppt p28)SYNj</li>
<li>5道大题*20分</li>
<li>TCP拥塞控制</li>
<li>路由表</li>
</ul>
<h1 id="划重点"><a href="#划重点" class="headerlink" title="划重点"></a>划重点</h1><h2 id="第一章"><a href="#第一章" class="headerlink" title="第一章"></a>第一章</h2><p>好好看看</p>
<h2 id="第二章"><a href="#第二章" class="headerlink" title="第二章"></a>第二章</h2><p>不考</p>
<h2 id="第三章"><a href="#第三章" class="headerlink" title="第三章"></a>第三章</h2><ul>
<li>3.2,3.3：看看概念</li>
<li>3.4：不考</li>
<li>3.5~7: 注意一下</li>
</ul>
<h2 id="第四章"><a href="#第四章" class="headerlink" title="第四章"></a>第四章</h2><p>4.2,4.3</p>
<h2 id="第五章"><a href="#第五章" class="headerlink" title="第五章"></a>第五章</h2><ul>
<li>5.2， 5.3</li>
<li>5.4：基本概念</li>
<li>5.6：简单知道ping和traceroute怎么用</li>
</ul>
<h2 id="第六章"><a href="#第六章" class="headerlink" title="第六章"></a>第六章</h2><ul>
<li>6.3（6.3.4除外）</li>
<li>以太网，CSMA/CD</li>
</ul>
<h2 id="第七章"><a href="#第七章" class="headerlink" title="第七章"></a>第七章</h2><p>7.3：主要是概念，不会考太细，CSMA/CA</p>
<h2 id="第九章"><a href="#第九章" class="headerlink" title="第九章"></a>第九章</h2><p>QoS</p>

    </article>
    <!-- license  -->
    
        <div class="license-wrapper">
            <p>原文作者: <a href="https://mengzelev.github.io">Mengzelev</a>
            <p>原文链接: <a href="https://mengzelev.github.io/2019/10/12/network-notes/">https://mengzelev.github.io/2019/10/12/network-notes/</a>
            <p>发表日期: <a href="https://mengzelev.github.io/2019/10/12/network-notes/">October 12th 2019, 11:25:20 am</a>
            <p>版权声明: 本文采用<a rel="license noopener" target="_blank" href="http://creativecommons.org/licenses/by-nc/4.0/">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可</p>
        </div>
    
    <!-- paginator  -->
    <ul class="post-paginator">
        <li class="next">
            
                <div class="nextSlogan">Next Post</div>
                <a href= "/2019/11/03/tofel-1st-exp/" title= 托福首考日记 >
                    <div class="nextTitle">托福首考日记</div>
                </a>
            
        </li>
        <li class="previous">
            
                <div class="prevSlogan">Previous Post</div>
                <a href= "/2019/10/11/dip-notes/" title= 数字图像处理课程笔记 >
                    <div class="prevTitle">数字图像处理课程笔记</div>
                </a>
            
        </li>
    </ul>
    <!-- 评论插件 -->
    <!-- 来必力City版安装代码 -->

<!-- City版安装代码已完成 -->
    
    
    <!--PC和WAP自适应版-->

    <!--PC版-->


    
    
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
    <div id="comment"></div>
    <script>
    new Valine({
        el: '#comment' ,
        notify:false, 
        verify:false, 
        appId: "yj3PGIKmV8xpEnFYOgSseo5x-gzGzoHsz",
        appKey: "vGSIx5E7w6LLK0M0jUlIUG05",
        placeholder: "看完了都不说一句再走么(。•ω•)σ)´Д`)",
        path:window.location.pathname, 
        avatar:'mm' 
    });
    </script>


    <!-- 评论 -->
</main>
            <!-- profile -->
            
        </div>
        <footer class="footer footer-unloaded">
    <!-- social  -->
    
    <div class="social">
        
    
        
            
                <a href="mailto:Mengzelev@gmail.com" class="iconfont-archer email" title=email ></a>
            
        
    
        
            
                <a href="//github.com/mengzelev" class="iconfont-archer github" target="_blank" title=github></a>
            
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
            
                <a href="/atom.xml" class="iconfont-archer rss" target="_blank" title=rss></a>
            
        
    

    </div>
    
    <!-- powered by Hexo  -->
    <div class="copyright">
        <span id="hexo-power">Powered by <a href="https://hexo.io/" target="_blank">Hexo</a></span><span class="iconfont-archer power">&#xe635;</span><span id="theme-info">theme <a href="https://github.com/fi3ework/hexo-theme-archer" target="_blank">Archer</a></span>
    </div>
    <!-- 不蒜子  -->
    
    <div class="busuanzi-container">
    
     
    <span id="busuanzi_container_site_pv">PV: <span id="busuanzi_value_site_pv"></span> :)</span>
    
    </div>
    
</footer>
    </div>
    <!-- toc -->
    
    <div class="toc-wrapper" style=
    







top:50vh;

    >
        <div class="toc-catalog">
            <span class="iconfont-archer catalog-icon">&#xe613;</span><span>CATALOG</span>
        </div>
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Introduction"><span class="toc-number">1.</span> <span class="toc-text">Introduction</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2"><span class="toc-number">1.1.</span> <span class="toc-text">分组交换</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2"><span class="toc-number">1.2.</span> <span class="toc-text">电路交换</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%B6%E5%BB%B6"><span class="toc-number">1.3.</span> <span class="toc-text">时延</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%92%E9%98%9F%E6%97%B6%E5%BB%B6"><span class="toc-number">1.4.</span> <span class="toc-text">排队时延</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%9E%E5%90%90%E9%87%8F"><span class="toc-number">1.5.</span> <span class="toc-text">吞吐量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%8F%E8%AE%AE%E5%88%86%E5%B1%82"><span class="toc-number">1.6.</span> <span class="toc-text">协议分层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%B1%82"><span class="toc-number">1.6.1.</span> <span class="toc-text">应用层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%BE%93%E5%B1%82"><span class="toc-number">1.6.2.</span> <span class="toc-text">运输层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%B1%82"><span class="toc-number">1.6.3.</span> <span class="toc-text">网络层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">1.6.4.</span> <span class="toc-text">链路层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%A9%E7%90%86%E5%B1%82"><span class="toc-number">1.6.5.</span> <span class="toc-text">　物理层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#OSI%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.6.6.</span> <span class="toc-text">OSI模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%81%E8%A3%85"><span class="toc-number">1.6.7.</span> <span class="toc-text">封装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E6%94%BB%E5%87%BB"><span class="toc-number">1.7.</span> <span class="toc-text">网络攻击</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Ch6-%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91"><span class="toc-number">2.</span> <span class="toc-text">Ch6 链路层和局域网</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1"><span class="toc-number">2.1.</span> <span class="toc-text">服务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B7%AE%E9%94%99%E6%A3%80%E6%B5%8B%E5%92%8C%E7%BA%A0%E6%AD%A3%E6%8A%80%E6%9C%AF"><span class="toc-number">2.2.</span> <span class="toc-text">差错检测和纠正技术</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A5%87%E5%81%B6%E6%A0%A1%E9%AA%8C"><span class="toc-number">2.2.1.</span> <span class="toc-text">　奇偶校验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Internet-checksum"><span class="toc-number">2.2.2.</span> <span class="toc-text">Internet checksum</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E5%86%97%E4%BD%99%E6%A3%80%E6%B5%8BCRC"><span class="toc-number">2.2.3.</span> <span class="toc-text">循环冗余检测CRC</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E8%B7%AF%E8%AE%BF%E9%97%AE%E9%93%BE%E8%B7%AF%E5%92%8C%E5%8D%8F%E8%AE%AE"><span class="toc-number">2.3.</span> <span class="toc-text">多路访问链路和协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%A1%E9%81%93%E5%88%92%E5%88%86%E5%8D%8F%E8%AE%AE"><span class="toc-number">2.3.1.</span> <span class="toc-text">信道划分协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9A%8F%E6%9C%BA%E6%8E%A5%E5%85%A5%E5%8D%8F%E8%AE%AE"><span class="toc-number">2.3.2.</span> <span class="toc-text">随机接入协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%B6%E9%9A%99ALOHA"><span class="toc-number">2.3.2.1.</span> <span class="toc-text">时隙ALOHA</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ALOHA"><span class="toc-number">2.3.2.2.</span> <span class="toc-text">ALOHA</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CSMA-%E8%BD%BD%E6%B3%A2%E4%BE%A6%E5%90%AC%E5%A4%9A%E8%B7%AF%E8%AE%BF%E9%97%AE"><span class="toc-number">2.3.2.3.</span> <span class="toc-text">CSMA(载波侦听多路访问)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CSMA-CD-%E5%85%B7%E6%9C%89%E7%A2%B0%E6%92%9E%E6%A3%80%E6%B5%8B%E7%9A%84%E8%BD%BD%E6%B3%A2%E4%BE%A6%E5%90%AC%E5%A4%9A%E8%B7%AF%E8%AE%BF%E9%97%AE"><span class="toc-number">2.3.2.4.</span> <span class="toc-text">CSMA&#x2F;CD(具有碰撞检测的载波侦听多路访问)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AE%E6%B5%81%E5%8D%8F%E8%AE%AE"><span class="toc-number">2.3.3.</span> <span class="toc-text">轮流协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AE%E8%AF%A2%E5%8D%8F%E8%AE%AE"><span class="toc-number">2.3.3.1.</span> <span class="toc-text">轮询协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A4%E7%89%8C%E4%BC%A0%E9%80%92%E5%8D%8F%E8%AE%AE"><span class="toc-number">2.3.3.2.</span> <span class="toc-text">令牌传递协议</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E5%B1%80%E5%9F%9F%E7%BD%91"><span class="toc-number">2.4.</span> <span class="toc-text">交换局域网</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#MAC%E5%9C%B0%E5%9D%80"><span class="toc-number">2.4.1.</span> <span class="toc-text">MAC地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AEARP"><span class="toc-number">2.4.2.</span> <span class="toc-text">　地址解析协议ARP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%87%E7%A8%8B"><span class="toc-number">2.4.2.1.</span> <span class="toc-text">过程</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">2.4.3.</span> <span class="toc-text">以太网</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%A7%E7%BB%93%E6%9E%84"><span class="toc-number">2.4.3.1.</span> <span class="toc-text">帧结构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%BE%E8%B7%AF%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="toc-number">2.4.4.</span> <span class="toc-text">链路层交换机</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2%E6%9C%BA%E8%A1%A8"><span class="toc-number">2.4.4.1.</span> <span class="toc-text">交换机表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AD%A6%E4%B9%A0"><span class="toc-number">2.4.4.2.</span> <span class="toc-text">自学习</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%98%E7%82%B9"><span class="toc-number">2.4.4.3.</span> <span class="toc-text">优点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%BA%E7%82%B9"><span class="toc-number">2.4.4.4.</span> <span class="toc-text">缺点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91"><span class="toc-number">2.4.5.</span> <span class="toc-text">虚拟局域网</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#CH7-%E6%97%A0%E7%BA%BF%E7%BD%91%E7%BB%9C%E5%92%8C%E7%A7%BB%E5%8A%A8%E7%BD%91%E7%BB%9C"><span class="toc-number">3.</span> <span class="toc-text">CH7 无线网络和移动网络</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A0%E7%BA%BF%E9%93%BE%E8%B7%AF%E5%92%8C%E7%BD%91%E7%BB%9C%E7%89%B9%E5%BE%81"><span class="toc-number">3.1.</span> <span class="toc-text">无线链路和网络特征</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CDMA"><span class="toc-number">3.2.</span> <span class="toc-text">CDMA</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WiFi-802-11%E6%97%A0%E7%BA%BFLAN"><span class="toc-number">3.3.</span> <span class="toc-text">WiFi: 802.11无线LAN</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%A1%E9%81%93%E4%B8%8E%E5%85%B3%E8%81%94"><span class="toc-number">3.3.1.</span> <span class="toc-text">信道与关联</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#CH4-%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2"><span class="toc-number">4.</span> <span class="toc-text">CH4 网络层：数据平面</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">4.1.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">4.2.</span> <span class="toc-text">路由工作原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E7%AB%AF%E5%8F%A3%E5%A4%84%E7%90%86"><span class="toc-number">4.2.1.</span> <span class="toc-text">输入端口处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%A4%E6%8D%A2"><span class="toc-number">4.2.2.</span> <span class="toc-text">交换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E7%AB%AF%E5%8F%A3%E5%A4%84%E7%90%86"><span class="toc-number">4.2.3.</span> <span class="toc-text">输出端口处理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E9%98%9F"><span class="toc-number">4.2.4.</span> <span class="toc-text">　排队</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E8%B0%83%E5%BA%A6"><span class="toc-number">4.2.5.</span> <span class="toc-text">分组调度</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IPv4"><span class="toc-number">4.3.</span> <span class="toc-text">IPv4</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%A0%BC%E5%BC%8F"><span class="toc-number">4.3.1.</span> <span class="toc-text">数据报格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%88%86%E7%89%87"><span class="toc-number">4.3.2.</span> <span class="toc-text">数据报分片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%9D%80"><span class="toc-number">4.3.3.</span> <span class="toc-text">编址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E4%B8%80%E5%9D%97%E5%9C%B0%E5%9D%80"><span class="toc-number">4.3.4.</span> <span class="toc-text">获取一块地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E4%B8%BB%E6%9C%BA%E5%9C%B0%E5%9D%80%EF%BC%9ADHCP"><span class="toc-number">4.3.5.</span> <span class="toc-text">获取主机地址：DHCP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#DHCP%E5%8D%8F%E8%AE%AE4%E6%AD%A5"><span class="toc-number">4.3.5.1.</span> <span class="toc-text">DHCP协议4步</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2-NAT"><span class="toc-number">4.4.</span> <span class="toc-text">网络地址转换(NAT)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IPv6"><span class="toc-number">4.5.</span> <span class="toc-text">IPv6</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%A0%BC%E5%BC%8F-1"><span class="toc-number">4.5.1.</span> <span class="toc-text">数据报格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%AF%B9IPv4%E7%9A%84%E5%8F%98%E5%8C%96"><span class="toc-number">4.5.2.</span> <span class="toc-text">相对IPv4的变化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IPv4%E5%88%B0IPv6%E7%9A%84%E8%BF%81%E7%A7%BB"><span class="toc-number">4.5.3.</span> <span class="toc-text">IPv4到IPv6的迁移</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E7%94%A8%E8%BD%AC%E5%8F%91%E5%92%8CSDN"><span class="toc-number">4.6.</span> <span class="toc-text">通用转发和SDN</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%B9%E9%85%8D"><span class="toc-number">4.6.1.</span> <span class="toc-text">匹配</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#CH5-%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2"><span class="toc-number">5.</span> <span class="toc-text">CH5 网络层：控制平面</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E7%AE%97%E6%B3%95"><span class="toc-number">5.1.</span> <span class="toc-text">路由选择算法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E7%AE%97%E6%B3%95"><span class="toc-number">5.1.1.</span> <span class="toc-text">链路状态路由选择算法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%9D%E7%A6%BB%E5%90%91%E9%87%8F-DV-%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E7%AE%97%E6%B3%95"><span class="toc-number">5.1.2.</span> <span class="toc-text">距离向量(DV)路由选择算法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AF%94%E8%BE%83"><span class="toc-number">5.1.3.</span> <span class="toc-text">比较</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%A0%E7%89%B9%E7%BD%91%E8%87%AA%E6%B2%BB%E7%B3%BB%E7%BB%9F%E5%86%85%E9%83%A8%E7%9A%84%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%EF%BC%9AOSPF"><span class="toc-number">5.2.</span> <span class="toc-text">因特网自治系统内部的路由选择：OSPF</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AS%E9%97%B4%E7%9A%84%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE%EF%BC%9ABGP"><span class="toc-number">5.3.</span> <span class="toc-text">AS间的路由选择协议：BGP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E5%91%8ABGP%E8%B7%AF%E7%94%B1%E4%BF%A1%E6%81%AF"><span class="toc-number">5.3.1.</span> <span class="toc-text">通告BGP路由信息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%83%AD%E5%9C%9F%E8%B1%86%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9"><span class="toc-number">5.3.2.</span> <span class="toc-text">热土豆路由选择</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E7%AE%97%E6%B3%95-1"><span class="toc-number">5.3.3.</span> <span class="toc-text">路由选择算法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#IP%E4%BB%BB%E6%92%AD"><span class="toc-number">5.3.4.</span> <span class="toc-text">IP任播</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E7%AD%96%E7%95%A5"><span class="toc-number">5.3.5.</span> <span class="toc-text">路由选择策略</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-6-ICMP%E5%9B%A0%E7%89%B9%E7%BD%91%E6%8E%A7%E5%88%B6%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AE"><span class="toc-number">5.4.</span> <span class="toc-text">5.6 ICMP因特网控制报文协议</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#CH3-%E8%BF%90%E8%BE%93%E5%B1%82"><span class="toc-number">6.</span> <span class="toc-text">CH3 运输层</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8%E5%92%8C%E5%A4%9A%E8%B7%AF%E5%88%86%E8%A7%A3"><span class="toc-number">6.1.</span> <span class="toc-text">多路复用和多路分解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#UDP%E7%9A%84%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8%E4%B8%8E%E5%A4%9A%E8%B7%AF%E5%88%86%E8%A7%A3"><span class="toc-number">6.1.1.</span> <span class="toc-text">UDP的多路复用与多路分解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP%E7%9A%84%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8%E4%B8%8E%E5%A4%9A%E8%B7%AF%E5%88%86%E8%A7%A3"><span class="toc-number">6.1.2.</span> <span class="toc-text">TCP的多路复用与多路分解</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A0%E8%BF%9E%E6%8E%A5%E8%BF%90%E8%BE%93%EF%BC%9AUDP"><span class="toc-number">6.2.</span> <span class="toc-text">无连接运输：UDP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#UDP%E7%9A%84%E4%BC%98%E7%82%B9"><span class="toc-number">6.2.1.</span> <span class="toc-text">UDP的优点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UDP%E6%8A%A5%E6%96%87%E6%AE%B5%E7%BB%93%E6%9E%84"><span class="toc-number">6.2.2.</span> <span class="toc-text">UDP报文段结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UDP%E6%A3%80%E9%AA%8C%E5%92%8C"><span class="toc-number">6.2.3.</span> <span class="toc-text">UDP检验和</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E5%8E%9F%E7%90%86"><span class="toc-number">6.3.</span> <span class="toc-text">可靠数据传输原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.3.1.</span> <span class="toc-text">构造可靠数据传输协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E6%B0%B4%E7%BA%BF%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.3.2.</span> <span class="toc-text">流水线可靠数据传输协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9E%E9%80%80N%E6%AD%A5%EF%BC%88GBN%EF%BC%89"><span class="toc-number">6.3.2.1.</span> <span class="toc-text">回退N步（GBN）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%89%E6%8B%A9%E9%87%8D%E4%BC%A0%EF%BC%88SR%EF%BC%89"><span class="toc-number">6.3.2.2.</span> <span class="toc-text">选择重传（SR）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%A2%E5%90%91%E8%BF%9E%E6%8E%A5%E7%9A%84%E8%BF%90%E8%BE%93%EF%BC%9ATCP"><span class="toc-number">6.4.</span> <span class="toc-text">面向连接的运输：TCP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP%E8%BF%9E%E6%8E%A5"><span class="toc-number">6.4.1.</span> <span class="toc-text">TCP连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP%E6%8A%A5%E6%96%87%E6%AE%B5%E7%BB%93%E6%9E%84"><span class="toc-number">6.4.2.</span> <span class="toc-text">TCP报文段结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%8F%E5%8F%B7%E5%92%8C%E7%A1%AE%E8%AE%A4%E5%8F%B7"><span class="toc-number">6.4.2.1.</span> <span class="toc-text">序号和确认号</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%80%E8%BF%94%E6%97%B6%E9%97%B4%E4%BC%B0%E8%AE%A1%E4%B8%8E%E8%B6%85%E6%97%B6"><span class="toc-number">6.4.3.</span> <span class="toc-text">往返时间估计与超时</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93"><span class="toc-number">6.4.4.</span> <span class="toc-text">可靠数据传输</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BF%AB%E9%80%9F%E9%87%8D%E4%BC%A0"><span class="toc-number">6.4.4.1.</span> <span class="toc-text">快速重传</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="toc-number">6.4.5.</span> <span class="toc-text">流量控制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86"><span class="toc-number">6.4.6.</span> <span class="toc-text">TCP连接管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BB%BA%E7%AB%8BTCP%E8%BF%9E%E6%8E%A5%EF%BC%9A%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B"><span class="toc-number">6.4.6.1.</span> <span class="toc-text">建立TCP连接：三次握手</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E9%97%ADTCP%E8%BF%9E%E6%8E%A5"><span class="toc-number">6.4.7.</span> <span class="toc-text">关闭TCP连接</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#TCP%E7%8A%B6%E6%80%81"><span class="toc-number">6.4.7.1.</span> <span class="toc-text">TCP状态</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#nmap%E7%AB%AF%E5%8F%A3%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7"><span class="toc-number">6.4.7.2.</span> <span class="toc-text">nmap端口扫描工具</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E5%8E%9F%E7%90%86"><span class="toc-number">6.5.</span> <span class="toc-text">拥塞控制原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%83%85%E5%86%B51%EF%BC%9A%E4%B8%A4%E4%B8%AA%E5%8F%91%E9%80%81%E6%96%B9%E5%92%8C%E4%B8%80%E5%8F%B0%E5%85%B7%E6%9C%89%E6%97%A0%E7%A9%B7%E5%A4%A7%E7%BC%93%E5%AD%98%E7%9A%84%E8%B7%AF%E7%94%B1%E5%99%A8"><span class="toc-number">6.5.1.</span> <span class="toc-text">情况1：两个发送方和一台具有无穷大缓存的路由器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%83%85%E5%86%B52%EF%BC%9A%E4%B8%A4%E4%B8%AA%E5%8F%91%E9%80%81%E6%96%B9%E5%92%8C%E4%B8%80%E5%8F%B0%E5%85%B7%E6%9C%89%E6%9C%89%E9%99%90%E7%BC%93%E5%AD%98%E7%9A%84%E8%B7%AF%E7%94%B1%E5%99%A8"><span class="toc-number">6.5.2.</span> <span class="toc-text">情况2：两个发送方和一台具有有限缓存的路由器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%83%85%E5%86%B53-4%E4%B8%AA%E5%8F%91%E9%80%81%E6%96%B9%E5%92%8C%E5%85%B7%E6%9C%89%E6%9C%89%E9%99%90%E7%BC%93%E5%AD%98%E7%9A%84%E5%A4%9A%E5%8F%B0%E8%B7%AF%E7%94%B1%E5%99%A8%E5%8F%8A%E5%A4%9A%E8%B7%B3%E8%B7%AF%E5%BE%84"><span class="toc-number">6.5.3.</span> <span class="toc-text">情况3:4个发送方和具有有限缓存的多台路由器及多跳路径</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E6%96%B9%E6%B3%95"><span class="toc-number">6.5.4.</span> <span class="toc-text">拥塞控制方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TCP%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="toc-number">6.6.</span> <span class="toc-text">TCP拥塞控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%AE%97%E6%B3%95"><span class="toc-number">6.6.1.</span> <span class="toc-text">TCP拥塞控制算法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%85%A2%E5%90%AF%E5%8A%A8"><span class="toc-number">6.6.1.1.</span> <span class="toc-text">慢启动</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E9%81%BF%E5%85%8D"><span class="toc-number">6.6.1.2.</span> <span class="toc-text">拥塞避免</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BF%AB%E9%80%9F%E6%81%A2%E5%A4%8D"><span class="toc-number">6.6.1.3.</span> <span class="toc-text">快速恢复</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%9E%E5%90%90%E9%87%8F-1"><span class="toc-number">6.6.1.4.</span> <span class="toc-text">吞吐量</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AC%E5%B9%B3%E6%80%A7"><span class="toc-number">6.6.2.</span> <span class="toc-text">公平性</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#CH9-%E5%A4%9A%E5%AA%92%E4%BD%93%E7%BD%91%E7%BB%9C"><span class="toc-number">7.</span> <span class="toc-text">CH9 多媒体网络</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E5%AA%92%E4%BD%93%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8"><span class="toc-number">7.1.</span> <span class="toc-text">多媒体网络应用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%81%E5%BC%8F%E5%AD%98%E5%82%A8%E8%A7%86%E9%A2%91"><span class="toc-number">7.2.</span> <span class="toc-text">流式存储视频</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#UDP%E6%B5%81"><span class="toc-number">7.2.1.</span> <span class="toc-text">UDP流</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HTTP%E6%B5%81"><span class="toc-number">7.2.2.</span> <span class="toc-text">HTTP流</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IP%E8%AF%AD%E9%9F%B3"><span class="toc-number">7.3.</span> <span class="toc-text">IP语音</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%BD%E5%8A%9B%E8%80%8C%E4%B8%BA%E7%9A%84%E6%9C%8D%E5%8A%A1%E9%99%90%E5%88%B6"><span class="toc-number">7.3.1.</span> <span class="toc-text">尽力而为的服务限制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%A2%E5%8C%85"><span class="toc-number">7.3.1.1.</span> <span class="toc-text">丢包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AB%AF%E5%88%B0%E7%AB%AF%E6%97%B6%E5%BB%B6"><span class="toc-number">7.3.1.2.</span> <span class="toc-text">端到端时延</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E6%97%B6%E5%BB%B6%E6%8A%96%E5%8A%A8"><span class="toc-number">7.3.1.3.</span> <span class="toc-text">分组时延抖动</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8%E6%8E%A5%E6%94%B6%E6%96%B9%E6%B6%88%E9%99%A4%E9%9F%B3%E9%A2%91%E7%9A%84%E6%97%B6%E5%BB%B6%E6%8A%96%E5%8A%A8"><span class="toc-number">7.3.2.</span> <span class="toc-text">在接收方消除音频的时延抖动</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%BA%E5%AE%9A%E6%92%AD%E6%94%BE%E6%97%B6%E5%BB%B6"><span class="toc-number">7.3.2.1.</span> <span class="toc-text">固定播放时延</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%82%E5%BA%94%E6%80%A7%E5%BB%B6%E8%BF%9F%E6%92%AD%E6%94%BE"><span class="toc-number">7.3.2.2.</span> <span class="toc-text">适应性延迟播放</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8E%E4%B8%A2%E5%8C%85%E4%B8%AD%E6%81%A2%E5%A4%8D"><span class="toc-number">7.3.3.</span> <span class="toc-text">从丢包中恢复</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%8D%E5%90%91%E7%BA%A0%E9%94%99%EF%BC%88FEC%EF%BC%89"><span class="toc-number">7.3.3.1.</span> <span class="toc-text">前向纠错（FEC）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%A4%E7%BB%87"><span class="toc-number">7.3.3.2.</span> <span class="toc-text">交织</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%AE%E9%94%99%E6%8E%A9%E7%9B%96"><span class="toc-number">7.3.3.3.</span> <span class="toc-text">差错掩盖</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E6%97%B6%E4%BC%9A%E8%AF%9D%E5%BC%8F%E5%BA%94%E7%94%A8%E7%9A%84%E5%8D%8F%E8%AE%AE"><span class="toc-number">7.4.</span> <span class="toc-text">实时会话式应用的协议</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%94%AF%E6%8C%81%E5%A4%9A%E5%AA%92%E4%BD%93%E7%9A%84%E7%BD%91%E7%BB%9C"><span class="toc-number">7.5.</span> <span class="toc-text">支持多媒体的网络</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%90%E4%BE%9B%E5%A4%9A%E7%A7%8D%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%9C%8D%E5%8A%A1"><span class="toc-number">7.5.1.</span> <span class="toc-text">提供多种类型的服务</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%91%E7%AE%A1%EF%BC%9A%E6%BC%8F%E6%A1%B6"><span class="toc-number">7.5.1.1.</span> <span class="toc-text">监管：漏桶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BC%8F%E6%A1%B6-%E5%8A%A0%E6%9D%83%E5%85%AC%E5%B9%B3%E6%8E%92%E9%98%9F-%E9%98%9F%E5%88%97%E4%B8%AD%E5%8F%AF%E8%AF%81%E6%98%8E%E7%9A%84%E6%9C%80%E5%A4%A7%E6%97%B6%E5%BB%B6"><span class="toc-number">7.5.1.2.</span> <span class="toc-text">漏桶+加权公平排队&#x3D;队列中可证明的最大时延</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%A3%E5%97%A8%E8%80%83%E9%A2%98"><span class="toc-number">8.</span> <span class="toc-text">口嗨考题</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%92%E9%87%8D%E7%82%B9"><span class="toc-number">9.</span> <span class="toc-text">划重点</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0"><span class="toc-number">9.1.</span> <span class="toc-text">第一章</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0"><span class="toc-number">9.2.</span> <span class="toc-text">第二章</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E7%AB%A0"><span class="toc-number">9.3.</span> <span class="toc-text">第三章</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0"><span class="toc-number">9.4.</span> <span class="toc-text">第四章</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E7%AB%A0"><span class="toc-number">9.5.</span> <span class="toc-text">第五章</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E7%AB%A0"><span class="toc-number">9.6.</span> <span class="toc-text">第六章</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%83%E7%AB%A0"><span class="toc-number">9.7.</span> <span class="toc-text">第七章</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B9%9D%E7%AB%A0"><span class="toc-number">9.8.</span> <span class="toc-text">第九章</span></a></li></ol></li></ol>
    </div>
    
    <div class="back-top iconfont-archer">&#xe639;</div>
    <div class="sidebar sidebar-hide">
    <ul class="sidebar-tabs sidebar-tabs-active-0">
        <li class="sidebar-tab-archives"><span class="iconfont-archer">&#xe67d;</span><span class="tab-name">Archive</span></li>
        <li class="sidebar-tab-tags"><span class="iconfont-archer">&#xe61b;</span><span class="tab-name">Tag</span></li>
        <li class="sidebar-tab-categories"><span class="iconfont-archer">&#xe666;</span><span class="tab-name">Cate</span></li>
    </ul>
    <div class="sidebar-content sidebar-content-show-archive">
          <div class="sidebar-panel-archives">
    <!-- 在ejs中将archive按照时间排序 -->
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <div class="total-and-search">
        <div class="total-archive">
        Total : 68
        </div>
        <!-- search  -->
        
    </div>
    
    <div class="post-archive">
    
    
    
    
    <div class="archive-year"> 2021 </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">01/07</span><a class="archive-post-title" href= "/2021/01/07/static-program-analysis/" >软件分析课程期末复习笔记</a>
        </li>
    
    
    
    
    
        </ul>
    
    <div class="archive-year"> 2020 </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">12/27</span><a class="archive-post-title" href= "/2020/12/27/MIT-how-to-speak/" >MIT公开课——如何演讲</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">06/27</span><a class="archive-post-title" href= "/2020/06/27/Le-Deuxieme-Sexe/" >西蒙·波伏娃《第二性》读书笔记</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">06/24</span><a class="archive-post-title" href= "/2020/06/24/OOP-design-patterns/" >面向对象设计原则-课程笔记</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">06/17</span><a class="archive-post-title" href= "/2020/06/17/my-projects/" >我做过的项目</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">05/15</span><a class="archive-post-title" href= "/2020/05/15/leetcode-notes/" >LeetCode刷题笔记</a>
        </li>
    
    
    
    
    
        </ul>
    
    <div class="archive-year"> 2019 </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">12/29</span><a class="archive-post-title" href= "/2019/12/29/network-review/" >计算机网络-期末复习</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/03</span><a class="archive-post-title" href= "/2019/11/03/tofel-1st-exp/" >托福首考日记</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/12</span><a class="archive-post-title" href= "/2019/10/12/network-notes/" >计算机网络-课程笔记</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/11</span><a class="archive-post-title" href= "/2019/10/11/dip-notes/" >数字图像处理课程笔记</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/09</span><a class="archive-post-title" href= "/2019/10/09/database/" >数据库学习笔记</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">07/20</span><a class="archive-post-title" href= "/2019/07/20/paper-reading/" >论文阅读笔记</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">07/08</span><a class="archive-post-title" href= "/2019/07/08/system-rebuild-notes/" >Windows-Ubuntu双系统重装笔记</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">06/21</span><a class="archive-post-title" href= "/2019/06/21/os-review/" >操作系统期末复习笔记</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">06/21</span><a class="archive-post-title" href= "/2019/06/21/OSTEP-persistence/" >OSTEP阅读笔记-持久化部分</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">05/25</span><a class="archive-post-title" href= "/2019/05/25/ps-4-13-Randomized-Algorithms/" >难问题求解学习笔记-随机算法</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">05/18</span><a class="archive-post-title" href= "/2019/05/18/ps-4-12-Approximation-Algorithms/" >难问题求解学习笔记-近似算法</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">04/19</span><a class="archive-post-title" href= "/2019/04/19/oj-templates/" >自己看得惯的板子整理</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">04/15</span><a class="archive-post-title" href= "/2019/04/15/os-midterm/" >os期中复习</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">04/13</span><a class="archive-post-title" href= "/2019/04/13/ps-4-7-cryptographic-algorithm/" >问题求解学习笔记-密码算法</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">04/06</span><a class="archive-post-title" href= "/2019/04/06/clrs-31Number-Theoretic-Algorithms/" >算法导论学习笔记-数论算法</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">03/30</span><a class="archive-post-title" href= "/2019/03/30/ps-4-6-basic-number-theory/" >问题求解学习笔记-数论基础</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">03/23</span><a class="archive-post-title" href= "/2019/03/23/clrs-32String-Mathcing/" >算法导论学习笔记-字符串匹配</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">03/14</span><a class="archive-post-title" href= "/2019/03/14/ps-4-4-isomorphism/" >问求学习笔记-群同构基本定理与正规子群</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">03/09</span><a class="archive-post-title" href= "/2019/03/09/ps-4-3-permutation-lagrange/" >问求学习笔记-置换群与拉格朗日定理</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">03/02</span><a class="archive-post-title" href= "/2019/03/02/ps-4-2-group/" >问求学习笔记-群论初步</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">02/18</span><a class="archive-post-title" href= "/2019/02/18/2019-winter-flags/" >2019年寒假计划(flags)</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">02/13</span><a class="archive-post-title" href= "/2019/02/13/clrs-29Linear-Programming/" >算法导论学习笔记-线性规划</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">02/12</span><a class="archive-post-title" href= "/2019/02/12/SVM-getstart/" >SVM的临时抱佛脚for HK</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">02/11</span><a class="archive-post-title" href= "/2019/02/11/HKUST-discussion/" >HKUST项目讨论内容</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">01/30</span><a class="archive-post-title" href= "/2019/01/30/ICM-feelings/" >2019美赛经历</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">01/23</span><a class="archive-post-title" href= "/2019/01/23/python-getstart/" >python学习笔记</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">01/19</span><a class="archive-post-title" href= "/2019/01/19/matlab-usage/" >数学建模几种常用算法</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">01/16</span><a class="archive-post-title" href= "/2019/01/16/matlab-getstart/" >MATLAB临时抱佛脚</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">01/07</span><a class="archive-post-title" href= "/2019/01/07/Problem-Solving-3/" >问题求解3-总复习</a>
        </li>
    
    
    
    
    
        </ul>
    
    <div class="archive-year"> 2018 </div>
    <ul class="year-list">
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">12/29</span><a class="archive-post-title" href= "/2018/12/29/lab4-report/" >Lab4 实验报告</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">12/28</span><a class="archive-post-title" href= "/2018/12/28/PA4-report/" >PA4实验报告</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">12/18</span><a class="archive-post-title" href= "/2018/12/18/clrs28Matrix-Operation/" >算法导论学习笔记-矩阵运算</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">12/13</span><a class="archive-post-title" href= "/2018/12/13/planar-graph-and-coloring/" >图论学习笔记-平面图与着色</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">12/10</span><a class="archive-post-title" href= "/2018/12/10/Dinner/" >卫宫家今天的饭</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">12/08</span><a class="archive-post-title" href= "/2018/12/08/PA3-report/" >PA3实验报告</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">12/05</span><a class="archive-post-title" href= "/2018/12/05/clrs-26Maximum-Flow/" >算法导论学习笔记-最大流</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/28</span><a class="archive-post-title" href= "/2018/11/28/matchings/" >图论学习笔记-图中的匹配与覆盖</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/24</span><a class="archive-post-title" href= "/2018/11/24/lab3-report/" >Lab3：链接与加载（2）实验报告</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/21</span><a class="archive-post-title" href= "/2018/11/21/traversability/" >图论学习笔记-旅行问题</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/14</span><a class="archive-post-title" href= "/2018/11/14/connectivity/" >图论学习笔记-图中的连通性与距离</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/07</span><a class="archive-post-title" href= "/2018/11/07/clrs-25All-Pairs-Shortest-Paths/" >算法导论学习笔记-所有结点对的最短路径问题</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/06</span><a class="archive-post-title" href= "/2018/11/06/lab2-report/" >Lab2:链接与加载 实验报告</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">11/06</span><a class="archive-post-title" href= "/2018/11/06/PA2-report/" >PA2实验报告</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/30</span><a class="archive-post-title" href= "/2018/10/30/clrs-24Single-Source-Shortest-Path/" >算法导论学习笔记-单源最短路径</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/24</span><a class="archive-post-title" href= "/2018/10/24/clrs-22graphic-algs/" >算法导论学习笔记-基本图论算法</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/14</span><a class="archive-post-title" href= "/2018/10/14/tree/" >图论学习笔记-树</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/12</span><a class="archive-post-title" href= "/2018/10/12/lab1-report/" >Lab1-乘法 实验报告</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/06</span><a class="archive-post-title" href= "/2018/10/06/clrs-21DisjointSets/" >算法导论学习笔记-用于不相交集合的数据结构</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/04</span><a class="archive-post-title" href= "/2018/10/04/PA1-report/" >PA1实验报告</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">10/04</span><a class="archive-post-title" href= "/2018/10/04/pa-inspirations/" >做pa的时候可能会用到的操作</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/27</span><a class="archive-post-title" href= "/2018/09/27/ics-process-calling/" >关于“过程调用”的讨论</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/21</span><a class="archive-post-title" href= "/2018/09/21/regex/" >正则表达式学习笔记</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/17</span><a class="archive-post-title" href= "/2018/09/17/clrs-17amortized/" >算法导论学习笔记-摊还分析</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/17</span><a class="archive-post-title" href= "/2018/09/17/clrs-16greedy/" >算法导论学习笔记-贪心算法</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/16</span><a class="archive-post-title" href= "/2018/09/16/startjava/" >面向OJ的Java学习</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/12</span><a class="archive-post-title" href= "/2018/09/12/tmux/" >使用tmux变身炫酷程序猿(x</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">09/06</span><a class="archive-post-title" href= "/2018/09/06/vim/" >vim初探</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/31</span><a class="archive-post-title" href= "/2018/08/31/clrs-15dp/" >算法导论学习笔记-动态规划</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/30</span><a class="archive-post-title" href= "/2018/08/30/asm2/" >汇编语言复习笔记（二）</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/29</span><a class="archive-post-title" href= "/2018/08/29/asm-notes/" >汇编语言复习笔记（一）</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/18</span><a class="archive-post-title" href= "/2018/08/18/freshman/" >胡言乱语的大一总结</a>
        </li>
    
    
        <li class="archive-post-item">
            <span class="archive-post-date">08/12</span><a class="archive-post-title" href= "/2018/08/12/test-md/" >Markdown test</a>
        </li>
    
    </div>
  </div>
        <div class="sidebar-panel-tags">
    <div class="sidebar-tags-name">
    
        <span class="sidebar-tag-name" data-tags="Flags"><span class="iconfont-archer">&#xe606;</span>Flags</span>
    
        <span class="sidebar-tag-name" data-tags="Math Modeling"><span class="iconfont-archer">&#xe606;</span>Math Modeling</span>
    
        <span class="sidebar-tag-name" data-tags="Notes"><span class="iconfont-archer">&#xe606;</span>Notes</span>
    
        <span class="sidebar-tag-name" data-tags="pa"><span class="iconfont-archer">&#xe606;</span>pa</span>
    
        <span class="sidebar-tag-name" data-tags="ICS"><span class="iconfont-archer">&#xe606;</span>ICS</span>
    
        <span class="sidebar-tag-name" data-tags="Problem Solving"><span class="iconfont-archer">&#xe606;</span>Problem Solving</span>
    
        <span class="sidebar-tag-name" data-tags="Machine Learning"><span class="iconfont-archer">&#xe606;</span>Machine Learning</span>
    
        <span class="sidebar-tag-name" data-tags="Assembly Language"><span class="iconfont-archer">&#xe606;</span>Assembly Language</span>
    
        <span class="sidebar-tag-name" data-tags="CLRS"><span class="iconfont-archer">&#xe606;</span>CLRS</span>
    
        <span class="sidebar-tag-name" data-tags="dynamic programming"><span class="iconfont-archer">&#xe606;</span>dynamic programming</span>
    
        <span class="sidebar-tag-name" data-tags="greedy algorithm"><span class="iconfont-archer">&#xe606;</span>greedy algorithm</span>
    
        <span class="sidebar-tag-name" data-tags="amortized analysis"><span class="iconfont-archer">&#xe606;</span>amortized analysis</span>
    
        <span class="sidebar-tag-name" data-tags="Disjoint Sets"><span class="iconfont-archer">&#xe606;</span>Disjoint Sets</span>
    
        <span class="sidebar-tag-name" data-tags="Data Structure"><span class="iconfont-archer">&#xe606;</span>Data Structure</span>
    
        <span class="sidebar-tag-name" data-tags="Single Source Shortest Path"><span class="iconfont-archer">&#xe606;</span>Single Source Shortest Path</span>
    
        <span class="sidebar-tag-name" data-tags="Bellman-Ford"><span class="iconfont-archer">&#xe606;</span>Bellman-Ford</span>
    
        <span class="sidebar-tag-name" data-tags="Dijkstra"><span class="iconfont-archer">&#xe606;</span>Dijkstra</span>
    
        <span class="sidebar-tag-name" data-tags="Graph Algorithms"><span class="iconfont-archer">&#xe606;</span>Graph Algorithms</span>
    
        <span class="sidebar-tag-name" data-tags="Graph Theory"><span class="iconfont-archer">&#xe606;</span>Graph Theory</span>
    
        <span class="sidebar-tag-name" data-tags="Connectivity"><span class="iconfont-archer">&#xe606;</span>Connectivity</span>
    
        <span class="sidebar-tag-name" data-tags="freshman"><span class="iconfont-archer">&#xe606;</span>freshman</span>
    
        <span class="sidebar-tag-name" data-tags="college life"><span class="iconfont-archer">&#xe606;</span>college life</span>
    
        <span class="sidebar-tag-name" data-tags="ics"><span class="iconfont-archer">&#xe606;</span>ics</span>
    
        <span class="sidebar-tag-name" data-tags="process calling"><span class="iconfont-archer">&#xe606;</span>process calling</span>
    
        <span class="sidebar-tag-name" data-tags="Lab"><span class="iconfont-archer">&#xe606;</span>Lab</span>
    
        <span class="sidebar-tag-name" data-tags="Ics"><span class="iconfont-archer">&#xe606;</span>Ics</span>
    
        <span class="sidebar-tag-name" data-tags="Matchings"><span class="iconfont-archer">&#xe606;</span>Matchings</span>
    
        <span class="sidebar-tag-name" data-tags="Factorization"><span class="iconfont-archer">&#xe606;</span>Factorization</span>
    
        <span class="sidebar-tag-name" data-tags="MATLAB"><span class="iconfont-archer">&#xe606;</span>MATLAB</span>
    
        <span class="sidebar-tag-name" data-tags="Interview"><span class="iconfont-archer">&#xe606;</span>Interview</span>
    
        <span class="sidebar-tag-name" data-tags="Linux"><span class="iconfont-archer">&#xe606;</span>Linux</span>
    
        <span class="sidebar-tag-name" data-tags="vim"><span class="iconfont-archer">&#xe606;</span>vim</span>
    
        <span class="sidebar-tag-name" data-tags="Group Theory"><span class="iconfont-archer">&#xe606;</span>Group Theory</span>
    
        <span class="sidebar-tag-name" data-tags="regular expressions"><span class="iconfont-archer">&#xe606;</span>regular expressions</span>
    
        <span class="sidebar-tag-name" data-tags="linux"><span class="iconfont-archer">&#xe606;</span>linux</span>
    
        <span class="sidebar-tag-name" data-tags="Java"><span class="iconfont-archer">&#xe606;</span>Java</span>
    
        <span class="sidebar-tag-name" data-tags="programming"><span class="iconfont-archer">&#xe606;</span>programming</span>
    
        <span class="sidebar-tag-name" data-tags="markdown"><span class="iconfont-archer">&#xe606;</span>markdown</span>
    
        <span class="sidebar-tag-name" data-tags="tmux"><span class="iconfont-archer">&#xe606;</span>tmux</span>
    
        <span class="sidebar-tag-name" data-tags="Traversibility"><span class="iconfont-archer">&#xe606;</span>Traversibility</span>
    
        <span class="sidebar-tag-name" data-tags="Graph"><span class="iconfont-archer">&#xe606;</span>Graph</span>
    
        <span class="sidebar-tag-name" data-tags="Tree"><span class="iconfont-archer">&#xe606;</span>Tree</span>
    
        <span class="sidebar-tag-name" data-tags="Python"><span class="iconfont-archer">&#xe606;</span>Python</span>
    
        <span class="sidebar-tag-name" data-tags="notes"><span class="iconfont-archer">&#xe606;</span>notes</span>
    
        <span class="sidebar-tag-name" data-tags="Notes; Programming Languages;"><span class="iconfont-archer">&#xe606;</span>Notes; Programming Languages;</span>
    
    </div>
    <div class="iconfont-archer sidebar-tags-empty">&#xe678;</div>
    <div class="tag-load-fail" style="display: none; color: #ccc; font-size: 0.6rem;">
    缺失模块。<br/>
    1、请确保node版本大于6.2<br/>
    2、在博客根目录（注意不是archer根目录）执行以下命令：<br/>
    <span style="color: #f75357; font-size: 1rem; line-height: 2rem;">npm i hexo-generator-json-content --save</span><br/>
    3、在根目录_config.yml里添加配置：
    <pre style="color: #787878; font-size: 0.6rem;">
jsonContent:
  meta: false
  pages: false
  posts:
    title: true
    date: true
    path: true
    text: false
    raw: false
    content: false
    slug: false
    updated: false
    comments: false
    link: false
    permalink: false
    excerpt: false
    categories: true
    tags: true</pre>
    </div> 
    <div class="sidebar-tags-list"></div>
</div>
        <div class="sidebar-panel-categories">
    <div class="sidebar-categories-name">
    
        <span class="sidebar-category-name" data-categories="Flags"><span class="iconfont-archer">&#xe60a;</span>Flags</span>
    
        <span class="sidebar-category-name" data-categories="Diary"><span class="iconfont-archer">&#xe60a;</span>Diary</span>
    
        <span class="sidebar-category-name" data-categories="Notes"><span class="iconfont-archer">&#xe60a;</span>Notes</span>
    
        <span class="sidebar-category-name" data-categories="Self-learning"><span class="iconfont-archer">&#xe60a;</span>Self-learning</span>
    
    </div>
    <div class="iconfont-archer sidebar-categories-empty">&#xe678;</div>
    <div class="sidebar-categories-list"></div>
</div>
    </div>
</div> 
    <script>
    var siteMeta = {
        root: "/",
        author: "Mengzelev"
    }
</script>
    <!-- CDN failover -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
    <script type="text/javascript">
        if (typeof window.$ === 'undefined')
        {
            console.warn('jquery load from jsdelivr failed, will load local script')
            document.write('<script src="/lib/jquery.min.js">\x3C/script>')
        }
    </script>
    <script src="/scripts/main.js"></script>
    <!-- algolia -->
    
    <!-- busuanzi  -->
    
    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    
    <!-- CNZZ  -->
    
    </div>
    <!-- async load share.js -->
    
        <script src="/scripts/share.js" async></script>    
     
	<!--浏览器搞笑标题-->
	<script type="text/javascript" src="\js\FunnyTitle.js"></script>
	<!--动态线条背景-->
	<script type="text/javascript"
	color="220,220,220" opacity='0.7' zIndex="-2" count="200" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js">
	</script>
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":150,"height":150},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({{ JSON.stringify(config) }});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="{{ src }}">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end --></body>
</html>


